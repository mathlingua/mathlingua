{"version":3,"sources":["components/path-tree-item/PathTreeItem.module.css","services/AutoComplete.ts","services/Search.ts","services/api.ts","components/rendered-component/RenderedComponent.tsx","components/block-comment/BlockComment.tsx","components/error-view/ErrorView.tsx","components/entities-panel/EntitiesPanel.tsx","components/top-level-entry/TopLevelEntry.tsx","components/top-level-entity-group/TopLevelEntityGroup.tsx","support/hooks.ts","store/querySlice.ts","store/isEditModeSlice.ts","support/util.ts","store/errorResultsSlice.ts","store/editorFontSlice.ts","store/editorFontSizeSlice.ts","components/page/Page.tsx","store/pathsSlice.ts","store/sidePanelVisibleSlice.ts","store/selectedTabPathSlice.ts","components/path-tree-item/PathTreeItem.tsx","components/side-panel/SidePanel.tsx","components/side-panel-button/SidePanelButton.tsx","components/search-panel/SearchPanel.tsx","components/github-icon/GitHubIcon.tsx","components/edit-mode-button/EditModeButton.tsx","components/help-button/HelpButton.tsx","components/topbar/TopBar.tsx","components/signature-index/SignatureIndex.tsx","store/isFullscreenSlice.ts","components/content-panel/ContentPanel.tsx","components/reference/ReferencePanel.tsx","components/reference/Reference.ts","components/reference/tex-talk-reference-panel/TexTalkReference.ts","components/reference/tex-talk-reference-panel/TexTalkReferencePanel.tsx","components/reference/chalk-talk-reference-panel/ChalkTalkReference.ts","components/reference/chalk-talk-reference-panel/ChalkTalkReferencePanel.tsx","App.tsx","store/store.ts","support/serviceWorker.ts","index.tsx","components/signature-index/SignatureIndex.module.css","components/page/Page.module.css","components/search-panel/SearchPanel.module.css","components/top-level-entry/TopLevelEntry.module.css","components/reference/ReferencePanel.module.css","components/entities-panel/EntitiesPanel.module.css","components/top-level-entity-group/TopLevelEntityGroup.module.css","components/content-panel/ContentPanel.module.css","components/error-view/ErrorView.module.css","components/side-panel/SidePanel.module.css","components/github-icon/GitHubIcon.module.css","App.module.css","components/block-comment/BlockComment.module.css","components/topbar/TopBar.module.css","components/side-panel-button/SidePanelButton.module.css","components/edit-mode-button/EditModeButton.module.css","components/help-button/HelpButton.module.css"],"names":["module","exports","TrieNode","isWord","children","this","Map","AutoComplete","root","word","addToTrie","toLowerCase","prefix","searchTrie","trieNode","index","length","c","has","set","subNode","get","node","findTrieLeaf","result","Set","getWordsUnder","Array","from","buffer","char","add","keys","substring","Search","data","searchIndex","collectionResult","fileResults","fileResult","entities","entity","words","key","pathSet","relativePath","query","terms","split","map","it","trim","filter","size","i","intersect","set1","set2","values","x","notifyOfError","error","console","NetworkApiClient","a","axios","res","paths","message","path","params","undefined","suffixes","signature","errors","gitHubUrlInfo","url","entries","StaticApiClient","searchClient","autoCompleteClient","allPaths","signatureToEntity","pathToFileResult","firstFileResult","checkResponse","gitHubUrl","signatureIndex","configuration","err","column","row","search","getSuffixes","client","getClient","window","MATHLINGUA_DATA","isStatic","getAllPaths","getFirstPath","getFileResult","getAutocompleteSuffixes","getEntityWithSignature","check","getGitHubUrl","getSignatureIndex","getConfiguration","writeFileResult","content","post","readPage","deleteDir","deleteFile","renameDir","fromPath","toPath","renameFile","newDir","newFile","getSignatureSuffixes","items","getUsedSignaturesAtRow","signatures","RenderedComponent","props","ref","React","createRef","renderLatex","current","mathlinguaToggleDropdown","id","el","document","getElementById","className","viewSignature","api","entityResult","onViewEntity","fnName","fnArgs","rawId","rawSignature","replace","options","Element","attribs","onclick","exec","onClick","processInnerClick","domToReact","parse","html","uuid","Component","connect","buildMathFragment","rawText","text","fragment","createDocumentFragment","appendChild","createTextNode","span","createElement","math","katex","render","throwOnError","displayMode","e","indexOf","isInWritten","childNodes","n","textContent","child","nodeType","replaceChild","BlockComment","styles","mathlinguaBlockCommentTopLevel","renderedHtml","ErrorView","errorMessage","errorLabel","EntitiesPanel","entitiesPanel","style","entityPanes","display","closeAllButton","onCloseAll","icon","faTimes","pane","entitiesPanelItem","topLevelEntry","TopLevelEntry","useState","showRendered","setShowRendered","mathlinguaTopLevel","showCloseButton","mathlinguaCloseButton","onEntityClosed","mathlinguaIconPane","showOpenButton","to","mathlinguaOpenIcon","faShare","mathlinguaFlipIcon","rawHtml","TopLevelEntityGroup","entitiesWithIds","setEntitiesWithIds","concat","container","topLevelEntityGroup","triangleBorder","triangle","useAppDispatch","useDispatch","useAppSelector","useSelector","querySlice","createSlice","name","initialState","reducers","queryUpdated","state","action","payload","selectQuery","actions","isEditMode","isEditModeSlice","isEditModeUpdated","selectIsEditMode","isOnMobile","innerWidth","innerHeight","errorResultsSlice","errorResultsUpdated","selectErrorResults","errorResults","font","localStorage","getItem","editorFontSlice","editorFontUpdated","selectEditorFont","editorFont","fontSize","editorFontSizeSlice","editorFontSizeUpdated","selectEditorFontSize","editorFontSize","Pane","require","BASE_COMPLETIONS","then","completions","catch","addEventListener","event","ctrlKey","metaKey","preventDefault","Page","setFileResult","setError","isLoading","setIsLoading","useEffect","viewedPath","mathlinguaPage","viewedLine","targetId","onOpenFileInTab","PageWithNavigationView","linkPanel","previousRelativePath","previousLink","href","faAngleLeft","nextRelativePath","nextLink","faAngleRight","RenderedContent","useRef","markInstance","Mark","unmark","done","mark","caseSensitive","separateWordSearch","scroll","top","left","behavior","scrollIntoView","errorView","errorItem","type","EditorView","scheduledFunction","editor","annotations","showMenu","menuX","menuY","usedSignatures","setupCompletions","initializeEditor","refEditor","setState","forceUpdate","oncontextmenu","position","getCursorPosition","renderer","textToScreenCoordinates","pageX","pageY","lineHeight","gotoLine","line","resize","scrollToLine","nextProps","nextState","prevProps","flush","cancel","ann1","ann2","resp","dispatch","newAnnotations","Math","max","annotationsDiffer","thisAn","newAn","areAnnotationsEqual","Promise","all","onFileResultChanged","setValue","clearSelection","gutterElements","getElementsByClassName","backgroundColor","borderRight","borderRightWidth","borderRightColor","contentElements","borderTop","borderTopColor","borderTopWidth","langTools","getCompletions","session","pos","callback","curIndent","getEssentialIndent","getLine","sections","prevRow","tmpLine","startsWith","indent","unshift","remoteCompletions","suffix","value","caption","completionIndex","comp","allMatching","j","found","parts","normalizedPart","firstSection","p","k","partWithoutQuestion","push","score","first","zIndex","border","borderWidth","borderColor","borderRadius","boxShadow","usedSig","editorMenuItem","defPath","defRow","newEditor","mode","theme","onChange","getValue","debounce","saveAndUpdateAnnotations","editorProps","$blockScrolling","highlightActiveLine","showPrintMargin","enableBasicAutocompletion","enableLiveAutocompletion","tabSize","setOptions","useSoftTabs","fontFamily","width","height","minHeight","commands","bindKey","win","mac","SideBySideView","setRelativePath","setErrors","setEntities","overflow","background","pathsSlice","pathsUpdated","selectPaths","updatePathsForQuery","sidePanelVisible","sidePanelVisibleSlice","sidePanelVisibilityChanged","selectSidePanelVisible","selectedTabPathSlice","selectedTabPathUpdated","selectSelectedTabPath","selectedTabPath","PathTreeItem","isDir","isExpanded","setIsExpanded","allErrorResults","inputName","setInputName","isEditing","setIsEditing","isDeleting","setIsDeleting","reloadAllPaths","getAllErrorsFor","allErrors","getErrorStats","thisErrorResults","title","errorStats","isNaN","updateInputName","endsWith","alert","newPathParts","pop","newPath","join","onSubmit","getEditButtons","button","faWindowMaximize","faPencilAlt","faFileMedical","faFolderPlus","faCheck","faTrashAlt","sidePanelItem","maxWidth","mathlinguaListDirItem","faCaretDown","faCaretRight","input","placeholder","target","fontWeight","mathlinguaListFileItem","isFirstMathFile","link","selected","SidePanel","setAllPaths","pathData","setPathData","isFirstMathFileFound","populateTreeNode","allPathsToTreeNode","sidePanel","start","cur","find","newChild","slice","SidePanelButton","visible","alignItems","padding","marginLeft","marginRight","marginTop","marginBottom","sidePanelButton","faBars","SearchPanel","setQuery","dropdownDisplayStyle","setDropdownDisplayStyle","suggestions","setSuggestions","selectedIndex","setSelectedIndex","getLastQueryWord","setDropDownVisible","lastWord","complete","appendSuggestionSuffix","completeQuery","selectedSuggestion","queryToUse","min","contains","searchArea","onKeyUp","searchButton","faSearch","clearButton","searchDropdown","suggestion","searchDropdownItemSelected","searchDropdownItem","GitHubIcon","setUrl","githubIcon","faGithub","EditModeButton","editModeButton","faEye","faEdit","HelpButton","helpIcon","faQuestionCircle","TopBar","editorControls","paddingLeft","defaultValue","setItem","topbar","SignatureIndex","setIndex","calledPairs","entry","called","removeMathLaTeX","trimmed","toUpperCase","indexPage","indexList","sort","pair1","pair2","name1","name2","localeCompare","pair","indexListItem","indexListCalledLink","indexItemCalledLocation","entry1","entry2","sig1","sig2","indexItemLink","indexItemLocation","isFullscreenSlice","isFullscreen","isFullscreenUpdated","selectIsFullscreen","ContentPanel","location","hashLocation","useLocation","pathname","hash","Number","isSidePanelVisible","onLocationChanged","redirect","innerPanel","startedWithSidePanelVisible","right","paddingTop","paddingRight","faCaretUp","ThreeColumnContent","isNarrow","setIsNarrow","updateIsNarrow","removeEventListener","gridTemplateColumns","minWidth","TwoColumnContent","locations","setLocations","sidePanelSize","setSidePanelSize","getViewedLocationIndex","findIndex","divs","getElementsByTagName","div","dataset","selectIndex","viewedLocation","viewedLocationIndex","newSelectedIndex","newLocations","openFileInTab","initialSize","onClose","getLastPathLocation","TabbedView","onSelect","margin","selectedClassName","selectedTab","ReferencePanel","onLoad","referenceBody","referenceContent","referenceHeader1","literal","group","form","expressionDocName","commandLhsDocName","operatorCommandLhsDocName","numberDoc","example","identifierDoc","identifierArgsDoc","expressionArgsDoc","functionMappingLhsDoc","functionMappingDoc","sequenceMappingLhsDoc","sequenceMappingDoc","functionLikeSequenceLhsDoc","nonFunctionLikeSequenceLhsDoc","sequenceLhsDoc","allowed","curlyGroupDoc","parenGroupDoc","operatorDoc","tupleLhsDoc","tupleDoc","lhsDoc","commandArgLhsDoc","commandArgsLhsDoc","commandPartParenGroupLhsDoc","commandPartParenGroupDoc","commandPartCurlyGroupLhsDoc","commandPartCurlyGroupDoc","commandPartNameDoc","commandPartNamedGroupLhsDoc","commandPartNamedGroupDoc","commandPartSquareGroup","commandPartLhsDoc","commandPartDoc","commandLhsDoc","commandDoc","operatorCommandLhsDoc","operatorCommandDoc","colonEqualsRhsDoc","colonEqualsDoc","isOrInLhsDoc","isDoc","inDoc","textDoc","docs","getDocItems","nameToDocItem","item","refName","Error","buildNameToDocItems","getDocItemsImpl","curRefName","visited","curDocItem","docItem","getNeighborRefNames","TexTalkReferencePanel","preContent","anyItem","dangerouslySetInnerHTML","__html","functionLikeSequenceMappingDoc","nonFunctionLikeSequenceMappingDoc","collectionDoc","colonEqualsLhsDoc","targetDoc","ChalkTalkReferencePanel","analyticsInitialized","App","allowAnalytics","setAllowAnalytics","googleAnalyticsId","setGoogleAnalyticsId","config","pageViewed","ReactGA","initialize","page_title","hashType","contentPanel","exact","routerProps","history","buttonText","buttonStyle","color","declineButtonText","declineButtonStyle","enableDeclineButton","acceptOnScroll","onAccept","onDecline","debug","ErrorBoundary","hasError","info","store","configureStore","reducer","sidePanelVisibleReducer","pathsReducer","queryReducer","isEditModeReducer","isFullscreenReducer","errorResultsReducer","selectedTabPathReducer","editorFontReducer","editorFontSizeReducer","middleware","thunkMiddleware","Boolean","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9378c628.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"triangle\":\"PathTreeItem_triangle__1r7e7\",\"link\":\"PathTreeItem_link__2zHfD\",\"sidePanelItem\":\"PathTreeItem_sidePanelItem__1A12M\",\"mathlinguaListDirItem\":\"PathTreeItem_mathlinguaListDirItem__3BEwG\",\"mathlinguaListFileItem\":\"PathTreeItem_mathlinguaListFileItem__1JNHt\",\"selected\":\"PathTreeItem_selected__r_5l2\",\"errorStats\":\"PathTreeItem_errorStats__1EFpQ\",\"button\":\"PathTreeItem_button__1hcH-\",\"input\":\"PathTreeItem_input__1EXXq\"};","class TrieNode {\n  isWord: boolean;\n  readonly children: Map<string, TrieNode>;\n\n  constructor(isWord: boolean) {\n    this.isWord = isWord;\n    this.children = new Map();\n  }\n}\n\nexport class AutoComplete {\n  private root = new TrieNode(false);\n\n  add(word: string) {\n    this.addToTrie(this.root, word.toLowerCase(), 0);\n  }\n\n  getSuffixes(prefix: string) {\n    return this.searchTrie(this.root, prefix.toLowerCase());\n  }\n\n  private addToTrie(trieNode: TrieNode, word: string, index: number) {\n    if (index >= word.length) {\n      return;\n    }\n\n    const c = word[index];\n    if (!trieNode.children.has(c)) {\n      trieNode.children.set(c, {\n        isWord: index === word.length - 1,\n        children: new Map(),\n      });\n    }\n\n    const subNode = trieNode.children.get(c)!;\n    if (index === word.length - 1) {\n      subNode.isWord = true;\n    }\n\n    this.addToTrie(subNode, word, index + 1);\n  }\n\n  private searchTrie(trieNode: TrieNode, word: string) {\n    const node = this.findTrieLeaf(trieNode, word, 0);\n    if (!node) {\n      return [];\n    }\n    const result = new Set<string>();\n    this.getWordsUnder('', '', node, result);\n    return Array.from(result);\n  }\n\n  private findTrieLeaf(\n    trieNode: TrieNode,\n    word: string,\n    index: number\n  ): TrieNode | null {\n    if (index >= word.length) {\n      return trieNode;\n    }\n\n    const c = word[index];\n    if (trieNode.children.has(c)) {\n      return this.findTrieLeaf(trieNode.children.get(c)!, word, index + 1);\n    }\n\n    return null;\n  }\n\n  private getWordsUnder(\n    buffer: string,\n    char: string,\n    trieNode: TrieNode,\n    result: Set<string>\n  ) {\n    if (!trieNode) {\n      return;\n    }\n\n    buffer += char;\n    if (trieNode.isWord) {\n      result.add(buffer);\n    }\n\n    for (const c of trieNode.children.keys() as any) {\n      this.getWordsUnder(buffer, c, trieNode.children.get(c)!, result);\n    }\n\n    buffer = buffer.substring(0, buffer.length - 1);\n  }\n}\n","import { DecompositionResult } from './api';\n\nexport class Search {\n  //                       word  -> set of paths\n  private searchIndex: Map<string, Set<string>> = new Map();\n\n  constructor(data: DecompositionResult) {\n    for (const fileResult of data.collectionResult.fileResults) {\n      for (const entity of fileResult.entities) {\n        for (const word of entity.words) {\n          const key = word.toLowerCase();\n          const pathSet = this.searchIndex.get(key) ?? new Set();\n          pathSet.add(fileResult.relativePath);\n          this.searchIndex.set(key, pathSet);\n        }\n      }\n    }\n  }\n\n  search(query: string): string[] {\n    const terms = query\n      .split(' ')\n      .map((it) => it.trim().toLowerCase())\n      .filter((it) => it.length > 0);\n    if (terms.length === 0) {\n      return [];\n    }\n\n    let result = this.searchIndex.get(terms[0]) ?? new Set();\n    if (result.size === 0) {\n      return [];\n    }\n\n    for (let i = 1; i < terms.length; i++) {\n      result = intersect(result, this.searchIndex.get(terms[i]) ?? new Set());\n    }\n\n    return Array.from(result);\n  }\n}\n\nfunction intersect(set1: Set<string>, set2: Set<string>): Set<string> {\n  if (set2.size > set1.size) {\n    return intersect(set2, set1);\n  }\n\n  const result: Set<string> = new Set();\n  for (const x of Array.from(set1.values())) {\n    if (set2.has(x)) {\n      result.add(x);\n    }\n  }\n  return result;\n}\n","import axios from 'axios';\nimport { AutoComplete } from './AutoComplete';\nimport { Search } from './Search';\n\nexport interface EntityResult {\n  id: string;\n  relativePath: string;\n  type: string;\n  signature: string;\n  called: string[];\n  rawHtml: string;\n  renderedHtml: string;\n  words: string[];\n}\n\nexport interface FileResult {\n  relativePath: string;\n  nextRelativePath?: string;\n  previousRelativePath?: string;\n  content: string;\n  entities: EntityResult[];\n  errors: ErrorResult[];\n}\n\nexport interface ErrorResult {\n  relativePath: string;\n  message: string;\n  row: number;\n  column: number;\n}\n\nexport interface CollectionResult {\n  fileResults: FileResult[];\n  errors: ErrorResult[];\n}\n\nexport interface SignatureIndex {\n  entries: SignatureIndexEntry[];\n}\n\nexport interface SignatureIndexEntry {\n  id: string;\n  relativePath: string;\n  signature: string | undefined;\n  called: string[];\n}\n\nexport interface DecompositionResult {\n  gitHubUrl?: string;\n  collectionResult: CollectionResult;\n  signatureIndex: SignatureIndex;\n  configuration: Configuration;\n}\n\nexport interface Configuration {\n  googleAnalyticsId?: string;\n}\n\nexport interface CheckResponse {\n  errors: CheckError[];\n}\n\nexport interface CheckError {\n  path: string;\n  message: string;\n  row: number;\n  column: number;\n}\n\nexport interface GitHubUrlResponse {\n  url?: string;\n}\n\nexport interface UsedSignature {\n  signature: string;\n  defPath: string;\n  defRow: number;\n}\n\nexport interface UsedSignaturesAtRowResponse {\n  signatures: UsedSignature[];\n}\n\nexport interface CompletionItem {\n  name: string;\n  parts: string[];\n}\n\nexport interface Completions {\n  items: CompletionItem[];\n}\n\ninterface ApiClient {\n  getAllPaths(): Promise<string[]>;\n  getFileResult(path: string): Promise<FileResult | undefined>;\n  search(query: string): Promise<string[]>;\n  getAutocompleteSuffixes(word: string): Promise<string[]>;\n  getEntityWithSignature(signature: string): Promise<EntityResult | undefined>;\n  check(): Promise<CheckResponse>;\n  getGitHubUrl(): Promise<string | undefined>;\n  getFirstPath(): Promise<string>;\n  getSignatureIndex(): Promise<SignatureIndex>;\n  getConfiguration(): Promise<Configuration>;\n}\n\nfunction notifyOfError(error: string) {\n  console.error(error);\n}\n\nclass NetworkApiClient implements ApiClient {\n  async getAllPaths(): Promise<string[]> {\n    try {\n      const res = await axios.get('/api/allPaths');\n      return res.data.paths;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return [];\n    }\n  }\n\n  async getFileResult(path: string): Promise<FileResult | undefined> {\n    try {\n      const res = await axios.get('/api/fileResult', {\n        params: { path },\n      });\n      return res.data;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return undefined;\n    }\n  }\n\n  async search(query: string): Promise<string[]> {\n    try {\n      const res = await axios.get('/api/search', { params: { query } });\n      return res.data.paths;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return [];\n    }\n  }\n\n  async getAutocompleteSuffixes(word: string): Promise<string[]> {\n    try {\n      const res = await axios.get('/api/completeWord', { params: { word } });\n      return res.data.suffixes;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return [];\n    }\n  }\n\n  async getEntityWithSignature(\n    signature: string\n  ): Promise<EntityResult | undefined> {\n    try {\n      const res = await axios.get('/api/withSignature', {\n        params: { signature },\n      });\n      return res.data;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return undefined;\n    }\n  }\n\n  async check(): Promise<CheckResponse> {\n    try {\n      const res = await axios.get('/api/check');\n      return res.data;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return { errors: [] };\n    }\n  }\n\n  async getGitHubUrl(): Promise<string | undefined> {\n    try {\n      const res = await axios.get('/api/gitHubUrl');\n      const gitHubUrlInfo: GitHubUrlResponse = res.data;\n      return gitHubUrlInfo.url;\n    } catch (err: any) {\n      notifyOfError(err.message);\n      return undefined;\n    }\n  }\n\n  async getFirstPath(): Promise<string> {\n    try {\n      const res = await axios.get('/api/firstPath');\n      return res.data.path;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return '';\n    }\n  }\n\n  async getSignatureIndex(): Promise<SignatureIndex> {\n    try {\n      const res = await axios.get('/api/signatureIndex');\n      return res.data;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return { entries: [] };\n    }\n  }\n\n  async getConfiguration(): Promise<Configuration> {\n    try {\n      const res = await axios.get('/api/configuration');\n      return res.data;\n    } catch (error: any) {\n      notifyOfError(error.message);\n      return {};\n    }\n  }\n}\n\nclass StaticApiClient implements ApiClient {\n  private searchClient: Search;\n  private autoCompleteClient: AutoComplete;\n  private allPaths: string[];\n  private signatureToEntity: Map<string, EntityResult>;\n  private pathToFileResult: Map<string, FileResult>;\n  private firstFileResult: FileResult | undefined;\n  private checkResponse: CheckResponse;\n  private gitHubUrl: string | undefined;\n  private signatureIndex: SignatureIndex;\n  private configuration: Configuration;\n\n  constructor(data: DecompositionResult) {\n    this.searchClient = new Search(data);\n    this.autoCompleteClient = new AutoComplete();\n    for (const fileResult of data.collectionResult.fileResults) {\n      for (const entity of fileResult.entities) {\n        for (const word of entity.words) {\n          this.autoCompleteClient.add(word);\n        }\n      }\n    }\n\n    this.allPaths = data.collectionResult.fileResults.map(\n      (fileResult) => fileResult.relativePath\n    );\n\n    this.signatureToEntity = new Map();\n    for (const fileResult of data.collectionResult.fileResults) {\n      for (const entity of fileResult.entities) {\n        this.signatureToEntity.set(entity.signature, entity);\n      }\n    }\n\n    this.firstFileResult = data.collectionResult.fileResults[0];\n\n    this.pathToFileResult = new Map();\n    for (const fileResult of data.collectionResult.fileResults) {\n      this.pathToFileResult.set(fileResult.relativePath, fileResult);\n    }\n\n    this.checkResponse = {\n      errors: data.collectionResult.errors.map((err) => ({\n        column: err.column,\n        row: err.row,\n        path: err.relativePath,\n        message: err.message,\n      })),\n    };\n\n    this.gitHubUrl = data.gitHubUrl;\n    this.signatureIndex = data.signatureIndex;\n    this.configuration = data.configuration;\n  }\n\n  async getAllPaths(): Promise<string[]> {\n    return this.allPaths;\n  }\n\n  async getFileResult(path: string): Promise<FileResult | undefined> {\n    if (path === '') {\n      return this.firstFileResult;\n    }\n\n    return this.pathToFileResult.get(path);\n  }\n\n  async search(query: string): Promise<string[]> {\n    return this.searchClient.search(query);\n  }\n\n  async getAutocompleteSuffixes(word: string): Promise<string[]> {\n    return this.autoCompleteClient.getSuffixes(word);\n  }\n\n  async getEntityWithSignature(\n    signature: string\n  ): Promise<EntityResult | undefined> {\n    return this.signatureToEntity.get(signature);\n  }\n\n  async check(): Promise<CheckResponse> {\n    return this.checkResponse;\n  }\n\n  async getGitHubUrl(): Promise<string | undefined> {\n    return this.gitHubUrl;\n  }\n\n  async getFirstPath(): Promise<string> {\n    return this.allPaths[0];\n  }\n\n  async getSignatureIndex(): Promise<SignatureIndex> {\n    return this.signatureIndex;\n  }\n\n  async getConfiguration(): Promise<Configuration> {\n    return this.configuration;\n  }\n}\n\nlet client: ApiClient | null = null;\nfunction getClient(): ApiClient {\n  if (!client) {\n    const data = (window as any).MATHLINGUA_DATA;\n    if (data) {\n      client = new StaticApiClient(data);\n    } else {\n      client = new NetworkApiClient();\n    }\n  }\n  return client;\n}\n\nexport function isStatic() {\n  return !!(window as any).MATHLINGUA_DATA;\n}\n\nexport async function getAllPaths(): Promise<string[]> {\n  return getClient().getAllPaths();\n}\n\nexport async function getFirstPath(): Promise<string> {\n  return getClient().getFirstPath();\n}\n\nexport async function getFileResult(\n  path: string\n): Promise<FileResult | undefined> {\n  return getClient().getFileResult(path);\n}\n\nexport async function search(query: string): Promise<string[]> {\n  return getClient().search(query);\n}\n\nexport async function getAutocompleteSuffixes(word: string): Promise<string[]> {\n  return getClient().getAutocompleteSuffixes(word);\n}\n\nexport async function getEntityWithSignature(\n  signature: string\n): Promise<EntityResult | undefined> {\n  return getClient().getEntityWithSignature(signature);\n}\n\nexport async function check(): Promise<CheckResponse> {\n  return getClient().check();\n}\n\nexport async function getGitHubUrl(): Promise<string | undefined> {\n  return getClient().getGitHubUrl();\n}\n\nexport async function getSignatureIndex(): Promise<SignatureIndex> {\n  return getClient().getSignatureIndex();\n}\n\nexport async function getConfiguration(): Promise<Configuration> {\n  return getClient().getConfiguration();\n}\n\nexport async function writeFileResult(path: string, content: string) {\n  try {\n    await axios.post('/api/writePage', {\n      path,\n      content,\n    });\n  } catch (error: any) {\n    notifyOfError(error.message);\n  }\n}\n\nexport async function readPage(path: string): Promise<string> {\n  try {\n    const result = await axios.get('/api/readPage', {\n      params: { path },\n    });\n    return result.data.content;\n  } catch (error: any) {\n    notifyOfError(error.message);\n    return '';\n  }\n}\n\nexport async function deleteDir(path: string): Promise<void> {\n  try {\n    await axios.post('/api/deleteDir', {\n      path,\n    });\n  } catch (error: any) {\n    notifyOfError(error.message);\n  }\n}\n\nexport async function deleteFile(path: string): Promise<void> {\n  try {\n    await axios.post('/api/deleteFile', {\n      path,\n    });\n  } catch (error: any) {\n    notifyOfError(error.message);\n  }\n}\n\nexport async function renameDir(\n  fromPath: string,\n  toPath: string\n): Promise<void> {\n  try {\n    await axios.post('/api/renameDir', {\n      fromPath,\n      toPath,\n    });\n  } catch (error: any) {\n    notifyOfError(error.message);\n    return;\n  }\n}\n\nexport async function renameFile(\n  fromPath: string,\n  toPath: string\n): Promise<void> {\n  try {\n    await axios.post('/api/renameFile', {\n      fromPath,\n      toPath,\n    });\n  } catch (error: any) {\n    notifyOfError(error.message);\n  }\n}\n\nexport async function newDir(path: string): Promise<void> {\n  try {\n    await axios.post('/api/newDir', {\n      path,\n    });\n  } catch (error: any) {\n    notifyOfError(error.message);\n  }\n}\n\nexport async function newFile(path: string): Promise<void> {\n  try {\n    await axios.post('/api/newFile', {\n      path,\n    });\n  } catch (error: any) {\n    notifyOfError(error.message);\n  }\n}\n\nexport async function getSignatureSuffixes(prefix: string): Promise<string[]> {\n  try {\n    const res = await axios.get('/api/completeSignature', {\n      params: { prefix },\n    });\n    return res.data.suffixes;\n  } catch (error: any) {\n    notifyOfError(error.message);\n    return [];\n  }\n}\n\nexport async function getCompletions(): Promise<Completions> {\n  try {\n    const res = await axios.get('/api/completions');\n    return res.data;\n  } catch (error: any) {\n    notifyOfError(error.message);\n    return { items: [] };\n  }\n}\n\nexport async function getUsedSignaturesAtRow(path: string, row: number): Promise<UsedSignature[]> {\n  try {\n    const res = await axios.get('/api/usedSignaturesAtRow', {\n      params: {\n        path,\n        row\n      }\n    });\n    return res.data.signatures;\n  } catch (error: any) {\n    notifyOfError(error.message);\n    return [];\n  }\n}\n","import parse, { DOMNode, domToReact } from 'html-react-parser';\nimport { Element } from 'domhandler/lib/node';\n\nimport React from 'react';\nimport './RenderedComponent.css';\nimport * as api from '../../services/api';\nimport { connect } from 'react-redux';\nimport * as uuid from 'uuid';\n\ndeclare const katex: any;\n\nexport interface RenderedComponentProps {\n  html: string;\n  onViewEntity?: (entity: api.EntityResult) => void;\n}\n\nclass RenderedComponent extends React.Component<RenderedComponentProps> {\n  private ref: any;\n\n  constructor(props: RenderedComponentProps) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    // For some reason, on initial page load LaTeX is not rendered.\n    // Calling renderLatex twice is an attempt to address this.\n    renderLatex(this.ref.current);\n    renderLatex(this.ref.current);\n  }\n\n  componentDidUpdate() {\n    // For some reason, on initial page load LaTeX is not rendered.\n    // Calling renderLatex twice is an attempt to address this.\n    renderLatex(this.ref.current);\n    renderLatex(this.ref.current);\n  }\n\n  render() {\n    const mathlinguaToggleDropdown = (id: string) => {\n      const el = document.getElementById(id);\n      if (el) {\n        if (el.className === 'mathlingua-dropdown-menu-hidden') {\n          el.className = 'mathlingua-dropdown-menu-shown';\n        } else {\n          el.className = 'mathlingua-dropdown-menu-hidden';\n        }\n      }\n    };\n\n    const viewSignature = async (signature: string, id: string) => {\n      mathlinguaToggleDropdown(id);\n      const entityResult = await api.getEntityWithSignature(signature);\n      if (entityResult && this.props.onViewEntity) {\n        this.props.onViewEntity(entityResult);\n      }\n    };\n\n    async function processInnerClick(fnName: string, fnArgs: string[]) {\n      if (fnName === 'mathlinguaToggleDropdown') {\n        const rawId = fnArgs[0];\n        if (!rawId) {\n          return;\n        }\n        // the raw id is enclosed in either single or double quotes\n        const id = rawId.substring(1, rawId.length - 1);\n        mathlinguaToggleDropdown(id);\n      } else if (fnName === 'mathlinguaViewSignature') {\n        const rawSignature = fnArgs[0];\n        const rawId = fnArgs[1];\n        if (!rawSignature || !rawId) {\n          return;\n        }\n        // the javascript code has the backslashes escaped\n        // thus they need to be un-escaped to get the actual signature\n        const signature = rawSignature\n          .substring(1, rawSignature.length - 1)\n          .replace(/\\\\\\\\/, '\\\\');\n        const id = rawId.substring(1, rawId.length - 1);\n        viewSignature(signature, id);\n      }\n    }\n\n    const options = {\n      replace: (node: DOMNode) => {\n        if (\n          !(node instanceof Element) ||\n          !node.attribs ||\n          !node.attribs.onclick\n        ) {\n          return;\n        }\n\n        const onclick = node.attribs.onclick;\n        delete node.attribs.onclick;\n\n        const className = node.attribs['class'];\n        delete node.attribs['class'];\n\n        const exec = /([a-zA-Z0-9]+)\\((.*?)\\)/.exec(onclick.trim());\n        if (exec && exec.length === 3) {\n          const fnName = exec[1];\n          const fnArgs = exec[2].split(',').map((it) => it.trim());\n          return (\n            <span\n              className={className}\n              onClick={() => processInnerClick(fnName, fnArgs)}\n            >\n              {domToReact(node.children, options)}\n            </span>\n          );\n        }\n      },\n    };\n    return (\n      <div ref={this.ref}>\n        {parse(this.props.html.replace(/CUSTOM_SUFFIX/g, uuid.v4()), options)}\n      </div>\n    );\n  }\n}\n\nexport default connect()(RenderedComponent);\n\nfunction buildMathFragment(rawText: string) {\n  let text = rawText;\n  if (text[0] === '\"') {\n    text = text.substring(1);\n  }\n  if (text[text.length - 1] === '\"') {\n    text = text.substring(0, text.length - 1);\n  }\n  text = text.replace(/([a-zA-Z0-9])\\?\\??/g, '$1');\n  const fragment = document.createDocumentFragment();\n  let buffer = '';\n  let i = 0;\n  while (i < text.length) {\n    if (text[i] === '$' && text[i + 1] === '$' && text[i + 2] === '$') {\n      i += 3; // skip over the $s\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      let math = '';\n      while (\n        i < text.length &&\n        !(text[i] === '$' && text[i + 1] === '$' && text[i + 2] === '$')\n      ) {\n        math += text[i++];\n      }\n      if (text[i] === '$') {\n        i++; // move past the $\n      }\n      if (text[i] === '$') {\n        i++; // move past the second $\n      }\n      if (text[i] === '$') {\n        i++; // move past the third $\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: false,\n        });\n      } catch (e) {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else if (text[i] === '\\\\' && text[i + 1] === '[') {\n      i += 2; // skip over \\ and [\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      span.className = 'display-mode';\n      let math = '';\n      while (i < text.length && !(text[i] === '\\\\' && text[i + 1] === ']')) {\n        math += text[i++];\n      }\n      if (text[i] === '\\\\') {\n        i++; // move past the \\\n      }\n      if (text[i] === ']') {\n        i++; // move past the ]\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: true,\n        });\n      } catch {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else if (text[i] === '\\\\' && text[i + 1] === '(') {\n      i += 2; // skip over \\ and ()\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      let math = '';\n      while (i < text.length && !(text[i] === '\\\\' && text[i + 1] === ')')) {\n        math += text[i++];\n      }\n      if (text[i] === '\\\\') {\n        i++; // move past the \\\n      }\n      if (text[i] === ')') {\n        i++; // move past the )\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: false,\n        });\n      } catch {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else if (text[i] === '$' && text[i + 1] === '$') {\n      i += 2; // skip over $ and $\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      span.className = 'display-mode';\n      let math = '';\n      while (i < text.length && !(text[i] === '$' && text[i + 1] === '$')) {\n        math += text[i++];\n      }\n      if (text[i] === '$') {\n        i++; // move past the $\n      }\n      if (text[i] === '$') {\n        i++; // move past the $\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: true,\n        });\n      } catch {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else if (text[i] === '$') {\n      i++; // skip over the $\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      let math = '';\n      while (i < text.length && text[i] !== '$') {\n        math += text[i++];\n      }\n      if (text[i] === '$') {\n        i++; // move past the $\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: false,\n        });\n      } catch {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else {\n      buffer += text[i++];\n    }\n  }\n\n  if (buffer.length > 0) {\n    fragment.appendChild(document.createTextNode(buffer));\n  }\n\n  return fragment;\n}\n\nfunction renderLatex(node: any) {\n  if (\n    node.className &&\n    node.className.indexOf &&\n    node.className.indexOf('no-render') >= 0\n  ) {\n    return;\n  }\n\n  let isInWritten = false;\n  if (node.className === 'mathlingua') {\n    for (let i = 0; i < node.childNodes.length; i++) {\n      const n = node.childNodes[i];\n      if (\n        n &&\n        n.className === 'mathlingua-header' &&\n        n.textContent === 'written:'\n      ) {\n        isInWritten = true;\n        break;\n      }\n    }\n  }\n\n  for (let i = 0; i < node.childNodes.length; i++) {\n    const child = node.childNodes[i];\n\n    // node is an element node => nodeType === 1\n    // node is an attribute node => nodeType === 2\n    // node is a text node => nodeType === 3\n    // node is a comment node => nodeType === 8\n    if (child.nodeType === 3) {\n      let text = child.textContent;\n      if (text.trim()) {\n        if (isInWritten) {\n          // if the text is in a written: section\n          // turn \"some text\" to $$$some text$$$\n          // so the text is in math mode\n          if (text[0] === '\"') {\n            text = text.substring(1);\n          }\n          if (text[text.length - 1] === '\"') {\n            text = text.substring(0, text.length - 1);\n          }\n          text = '$$$' + text + '$$$';\n        }\n        const fragment = buildMathFragment(text);\n        i += fragment.childNodes.length - 1;\n        node.replaceChild(fragment, child);\n      }\n    } else if (child.nodeType === 1) {\n      renderLatex(child);\n    }\n  }\n}\n","import RenderedComponent from '../rendered-component/RenderedComponent';\nimport styles from './BlockComment.module.css';\n\nexport interface BlockCommentProps {\n  rawHtml: string;\n  renderedHtml: string;\n}\n\nexport const BlockComment = (props: BlockCommentProps) => {\n  return (\n    <div className={styles.mathlinguaBlockCommentTopLevel}>\n      <RenderedComponent html={props.renderedHtml}></RenderedComponent>\n    </div>\n  );\n};\n","import styles from './ErrorView.module.css';\n\ninterface ErrorViewProps {\n  message: string;\n}\n\nexport function ErrorView(props: ErrorViewProps) {\n  return (\n    <div className={styles.errorMessage}>\n      <span className={styles.errorLabel}>ERROR:</span> {props.message}\n    </div>\n  );\n}\n","import styles from './EntitiesPanel.module.css';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\n\nexport interface EntryPane {\n  id: string;\n  // the JSX.Element that is a <TopLevelEntry/>\n  topLevelEntry: JSX.Element;\n}\n\nexport interface EntitiesPanelProps {\n  entityPanes: EntryPane[];\n  onCloseAll?: () => void;\n}\n\nexport const EntitiesPanel = (props: EntitiesPanelProps) => {\n  return (\n    <div\n      className={styles.entitiesPanel}\n      style={\n        props.entityPanes.length > 0\n          ? { display: 'block' }\n          : { display: 'none' }\n      }\n    >\n      <div>\n        <button\n          className={styles.closeAllButton}\n          onClick={() => {\n            if (props.onCloseAll) {\n              props.onCloseAll();\n            }\n          }}\n          data-test-id=\"close-all-entities\"\n        >\n          <FontAwesomeIcon icon={faTimes} />\n        </button>\n        {props.entityPanes.map((pane) => (\n          <span key={pane.id} className={styles.entitiesPanelItem}>\n            {pane.topLevelEntry}\n          </span>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport RenderedComponent from '../rendered-component/RenderedComponent';\nimport styles from './TopLevelEntry.module.css';\n\nimport { EntityResult } from '../../services/api';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes, faShare } from '@fortawesome/free-solid-svg-icons';\nimport { Link } from 'react-router-dom';\n\nexport interface TopLevelEntryProps {\n  id: string;\n  relativePath: string;\n  showOpenButton: boolean;\n  showCloseButton: boolean;\n  rawHtml: string;\n  renderedHtml: string;\n  onViewEntity?: (entity: EntityResult) => void;\n  onEntityClosed?: (id: string) => void;\n}\n\nexport const TopLevelEntry = (props: TopLevelEntryProps) => {\n  const [showRendered, setShowRendered] = useState(true);\n\n  return (\n    <div id={props.id} className={styles.mathlinguaTopLevel}>\n      {props.showCloseButton ? (\n        <button\n          className={styles.mathlinguaCloseButton}\n          onClick={() => {\n            if (props.onEntityClosed) {\n              props.onEntityClosed(props.id);\n            }\n          }}\n          data-test-id=\"close-single-top-level-entry\"\n        >\n          <FontAwesomeIcon icon={faTimes} />\n        </button>\n      ) : null}\n      <span className={styles.mathlinguaIconPane}>\n        {props.showOpenButton ? (\n          <Link\n            to={`/${props.relativePath}#${props.id}`}\n            className={styles.mathlinguaOpenIcon}\n          >\n            <FontAwesomeIcon icon={faShare} />\n          </Link>\n        ) : null}\n        <button\n          className={styles.mathlinguaFlipIcon}\n          onClick={() => {\n            setShowRendered(!showRendered);\n          }}\n        >\n          \n        </button>\n      </span>\n      {showRendered ? (\n        <RenderedComponent\n          onViewEntity={props.onViewEntity}\n          html={props.renderedHtml}\n        />\n      ) : (\n        <RenderedComponent\n          onViewEntity={props.onViewEntity}\n          html={props.rawHtml}\n        />\n      )}\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport { EntityResult } from '../../services/api';\nimport { EntitiesPanel } from '../entities-panel/EntitiesPanel';\nimport { TopLevelEntry } from '../top-level-entry/TopLevelEntry';\nimport styles from './TopLevelEntityGroup.module.css';\nimport * as uuid from 'uuid';\n\nexport interface TopLevelEntityGroupProps {\n  entity: EntityResult;\n  relativePath: string;\n}\n\ninterface EntityResultWithId {\n  id: string;\n  entityResult: EntityResult;\n}\n\nexport const TopLevelEntityGroup = (props: TopLevelEntityGroupProps) => {\n  const [entitiesWithIds, setEntitiesWithIds] = useState(\n    [] as EntityResultWithId[]\n  );\n\n  const onViewEntity = (entity: EntityResult) => {\n    setEntitiesWithIds(\n      entitiesWithIds.concat({\n        id: uuid.v4(),\n        entityResult: entity,\n      })\n    );\n  };\n\n  const onEntityClosed = (id: string) => {\n    setEntitiesWithIds(\n      entitiesWithIds.filter((container) => container.id !== id)\n    );\n  };\n\n  return (\n    <div className={styles.topLevelEntityGroup}>\n      <TopLevelEntry\n        id={props.entity.id}\n        relativePath={props.entity.relativePath}\n        rawHtml={props.entity.rawHtml}\n        renderedHtml={props.entity.renderedHtml}\n        showOpenButton={false}\n        showCloseButton={false}\n        onViewEntity={onViewEntity}\n        onEntityClosed={onEntityClosed}\n      />\n      {entitiesWithIds.length > 0 ? (\n        <div className={styles.triangleBorder}>\n          <div className={styles.triangle}></div>\n        </div>\n      ) : null}\n      <EntitiesPanel\n        entityPanes={entitiesWithIds.map((container) => {\n          return {\n            id: container.id,\n            topLevelEntry: (\n              <div>\n                <TopLevelEntry\n                  id={container.id}\n                  relativePath={container.entityResult.relativePath}\n                  showOpenButton={true}\n                  showCloseButton={true}\n                  rawHtml={container.entityResult.rawHtml}\n                  renderedHtml={container.entityResult.renderedHtml}\n                  onViewEntity={onViewEntity}\n                  onEntityClosed={onEntityClosed}\n                ></TopLevelEntry>\n              </div>\n            ),\n          };\n        })}\n        onCloseAll={() => setEntitiesWithIds([])}\n      />\n    </div>\n  );\n};\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from '../store/store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\n\nexport interface QueryState {\n  query: string;\n}\n\nconst initialState: QueryState = {\n  query: '',\n};\n\nconst querySlice = createSlice({\n  name: 'query',\n  initialState,\n  reducers: {\n    queryUpdated(state: QueryState, action: PayloadAction<string>) {\n      state.query = action.payload;\n    },\n  },\n});\n\nexport const selectQuery = (state: RootState) => state.query.query;\n\nexport const { queryUpdated } = querySlice.actions;\n\nexport default querySlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { isStatic } from '../services/api';\nimport { RootState } from './store';\n\nexport interface IsEditModeState {\n  isEditMode: boolean;\n}\n\nconst initialState: IsEditModeState = {\n  isEditMode: !isStatic(),\n};\n\nconst isEditModeSlice = createSlice({\n  name: 'isEditMode',\n  initialState,\n  reducers: {\n    isEditModeUpdated(state: IsEditModeState, action: PayloadAction<boolean>) {\n      state.isEditMode = action.payload;\n    },\n  },\n});\n\nexport const selectIsEditMode = (state: RootState) =>\n  state.isEditMode.isEditMode;\n\nexport const { isEditModeUpdated } = isEditModeSlice.actions;\n\nexport default isEditModeSlice.reducer;\n","export function isOnMobile() {\n  return (window.innerWidth + 1)/(window.innerHeight + 1) < 1;\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\nimport * as api from '../services/api';\n\nexport interface ErrorResultsState {\n  errors: api.ErrorResult[];\n}\n\nconst initialState: ErrorResultsState = {\n  errors: [],\n};\n\nconst errorResultsSlice = createSlice({\n  name: 'errorResults',\n  initialState,\n  reducers: {\n    errorResultsUpdated(\n      state: ErrorResultsState,\n      action: PayloadAction<api.ErrorResult[]>\n    ) {\n      state.errors = action.payload;\n    },\n  },\n});\n\nexport const selectErrorResults = (state: RootState) =>\n  state.errorResults.errors;\n\nexport const { errorResultsUpdated } = errorResultsSlice.actions;\n\nexport default errorResultsSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\n\nexport interface EditorFontState {\n    font: string;\n}\n\nconst initialState: EditorFontState = {\n    font: window.localStorage.getItem('mlg.editorFont') ?? 'Inconsolata'\n};\n\nconst editorFontSlice = createSlice({\n  name: 'editorFont',\n  initialState,\n  reducers: {\n    editorFontUpdated(state: EditorFontState, action: PayloadAction<string>) {\n      state.font = action.payload;\n    },\n  },\n});\n\nexport const selectEditorFont = (state: RootState) => state.editorFont.font;\n\nexport const { editorFontUpdated } = editorFontSlice.actions;\n\nexport default editorFontSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\n\nexport interface EditorFontSizeState {\n    fontSize: string;\n}\n\nconst initialState: EditorFontSizeState = {\n    fontSize: window.localStorage.getItem('mlg.editorFontSize') ?? '18'\n};\n\nconst editorFontSizeSlice = createSlice({\n  name: 'editorFontSize',\n  initialState,\n  reducers: {\n    editorFontSizeUpdated(state: EditorFontSizeState, action: PayloadAction<string>) {\n      state.fontSize = action.payload;\n    },\n  },\n});\n\nexport const selectEditorFontSize = (state: RootState) => state.editorFontSize.fontSize;\n\nexport const { editorFontSizeUpdated } = editorFontSizeSlice.actions;\n\nexport default editorFontSizeSlice.reducer;\n","import Mark from 'mark.js';\nimport { BlockComment } from '../block-comment/BlockComment';\nimport styles from './Page.module.css';\n\nimport * as api from '../../services/api';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { ErrorView } from '../error-view/ErrorView';\nimport { TopLevelEntityGroup } from '../top-level-entity-group/TopLevelEntityGroup';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\nimport { selectQuery } from '../../store/querySlice';\n\nimport debounce from 'lodash.debounce';\n\nimport AceEditor from 'react-ace';\nimport 'ace-builds/src-min-noconflict/ext-searchbox';\n\nimport * as langTools from 'ace-builds/src-noconflict/ext-language_tools';\nimport 'ace-builds/src-noconflict/mode-yaml';\nimport 'ace-builds/src-noconflict/theme-eclipse';\nimport { selectIsEditMode } from '../../store/isEditModeSlice';\nimport { isOnMobile } from '../../support/util';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleRight, faAngleLeft } from '@fortawesome/free-solid-svg-icons';\nimport { DebouncedFunc } from 'lodash';\nimport { errorResultsUpdated } from '../../store/errorResultsSlice';\nimport { AppDispatch } from '../../store/store';\n\nimport SplitPane from 'react-split-pane';\nimport { selectEditorFont } from '../../store/editorFontSlice';\nimport { selectEditorFontSize } from '../../store/editorFontSizeSlice';\nconst Pane = require('react-split-pane/lib/Pane');\n\ninterface AceCompletion {\n  value: string;\n  caption: string;\n  score?: number;\n}\n\nlet BASE_COMPLETIONS: api.CompletionItem[] = [];\nif (!api.isStatic()) {\n  // the static version of the site doesn't allow editing and doesn't have a backend running\n  api.getCompletions().then(completions => { BASE_COMPLETIONS = completions.items }).catch(console.error);\n}\n\ninterface Annotation {\n  row: number;\n  column: number;\n  text: string;\n  type: 'error';\n}\n\nexport interface PageProps {\n  viewedPath: string;\n  viewedLine: number;\n  targetId: string;\n  onOpenFileInTab: (path: string, line?: number) => void;\n}\n\n// needed to allow Command+s on Mac and Ctrl+s on other systems to\n// save the current document\ndocument.addEventListener('keydown', (event) => {\n  if ((event.ctrlKey || event.metaKey) && event.key === 's') {\n    event.preventDefault();\n  }\n});\n\nexport const Page = (props: PageProps) => {\n  const [fileResult, setFileResult] = useState(\n    undefined as api.FileResult | undefined\n  );\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const isEditMode = useAppSelector(selectIsEditMode);\n\n  useEffect(() => {\n    api.getFileResult(props.viewedPath).then((fileResult) => {\n      if (fileResult) {\n        setError('');\n        setFileResult(fileResult);\n      } else {\n        setError('Page Not Found');\n      }\n      setIsLoading(false);\n    });\n  }, [isEditMode, props.viewedPath]);\n\n  if (error) {\n    return (\n      <div className={styles.mathlinguaPage}>\n        <ErrorView message={error} />\n      </div>\n    );\n  }\n\n  if (!fileResult && !isLoading) {\n    return (\n      <div>\n        <ErrorView message=\"Page Not Found\" />\n      </div>\n    );\n  }\n\n  if (\n    !fileResult ||\n    (fileResult.entities.length === 0 && fileResult.errors.length === 0)\n  ) {\n    return null;\n  }\n\n  return isEditMode ? (\n    <SideBySideView\n      relativePath={props.viewedPath}\n      viewedLine={props.viewedLine}\n      errors={fileResult.errors}\n      entities={fileResult.entities}\n      targetId={props.targetId}\n      onOpenFileInTab={props.onOpenFileInTab}\n    ></SideBySideView>\n  ) : (\n    <PageWithNavigationView\n      isOnMobile={isOnMobile()}\n      fileResult={fileResult}\n      targetId={props.targetId}\n    ></PageWithNavigationView>\n  );\n};\n\nconst PageWithNavigationView = (props: {\n  isOnMobile: boolean;\n  fileResult: api.FileResult;\n  targetId: string;\n}) => {\n  return (\n    <div className={styles.mathlinguaPage}>\n      <RenderedContent\n        relativePath={props.fileResult.relativePath}\n        errors={props.fileResult.errors}\n        entities={props.fileResult.entities}\n        targetId={props.targetId}\n      />\n      <div className={styles.linkPanel}>\n        {props.fileResult.previousRelativePath ? (\n          <a\n            className={styles.previousLink}\n            href={`#/${props.fileResult.previousRelativePath}`}\n          >\n            <FontAwesomeIcon icon={faAngleLeft} />\n          </a>\n        ) : null}\n        {props.fileResult.nextRelativePath ? (\n          <a\n            className={styles.nextLink}\n            href={`#/${props.fileResult.nextRelativePath}`}\n          >\n            <FontAwesomeIcon icon={faAngleRight} />\n          </a>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nconst RenderedContent = (props: {\n  relativePath: string;\n  errors: api.ErrorResult[];\n  entities: api.EntityResult[];\n  targetId: string;\n}) => {\n  const query = useAppSelector(selectQuery);\n  const ref = useRef(null);\n\n  useEffect(() => {\n    if (ref.current) {\n      const markInstance = new Mark(ref.current!);\n      markInstance.unmark({\n        done: () => {\n          if (query.length > 0) {\n            markInstance.mark(query, {\n              caseSensitive: false,\n              separateWordSearch: true,\n            });\n          }\n        },\n      });\n    }\n  }, [props.relativePath, props.entities, query]);\n\n  useEffect(() => {\n    if (ref.current) {\n      window.scroll({\n        top: 0,\n        left: 0,\n        behavior: 'auto',\n      });\n      const el = document.getElementById(props.targetId);\n      if (el) {\n        el.scrollIntoView();\n      }\n    }\n  }, [props.targetId, props.relativePath, query]);\n\n  return (\n    <div ref={ref}>\n      <div className={styles.errorView}>\n        {(props.errors || []).map((error) => (\n          <div className={styles.errorItem}>\n            {`ERROR (${error.row + 1}, ${error.column + 1}):`}\n            <pre>{error.message}</pre>\n          </div>\n        ))}\n      </div>\n      {props.entities.map((entityResult) => (\n        <div key={entityResult.id}>\n          {entityResult.type === 'TopLevelBlockComment' ? (\n            <BlockComment\n              renderedHtml={entityResult.renderedHtml}\n              rawHtml={entityResult.rawHtml}\n            />\n          ) : (\n            <TopLevelEntityGroup\n              entity={entityResult}\n              relativePath={props.relativePath}\n            />\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\ninterface EditorViewProps {\n  viewedPath: string;\n  viewedLine: number;\n  onFileResultChanged(fileResult: api.FileResult | undefined): void;\n  dispatch: AppDispatch;\n  onOpenFileInTab: (path: string, line?: number) => void;\n  editorFont: string;\n  editorFontSize: string;\n}\n\ninterface EditorViewState {\n  annotations: Annotation[];\n  menuX: number;\n  menuY: number;\n  showMenu: boolean;\n  usedSignatures: api.UsedSignature[];\n}\n\nclass EditorView extends React.Component<EditorViewProps, EditorViewState> {\n  private scheduledFunction: DebouncedFunc<any> | null = null;\n  private editor: any;\n  private ref: any;\n\n  constructor(props: EditorViewProps) {\n    super(props);\n    this.state = {\n      annotations: [],\n      showMenu: false,\n      menuX: 0,\n      menuY: 0,\n      usedSignatures: []\n    };\n  }\n\n  async componentDidMount() {\n    this.setupCompletions();\n    await this.initializeEditor();\n    if (this.ref && this.ref.refEditor) {\n      this.ref.refEditor.onclick = (e: any) => {\n        this.setState({\n          showMenu: false\n        });\n        this.forceUpdate();\n      };\n      this.ref.refEditor.oncontextmenu = async (e: any) => {\n        e.preventDefault();\n        const position  = this.editor.getCursorPosition();\n        const { pageX, pageY } = this.editor.renderer.textToScreenCoordinates(position.row, position.column);\n        const menuX = pageX;\n        const menuY = pageY + this.editor.renderer.lineHeight;\n        this.setState({\n          showMenu: true,\n          usedSignatures: await api.getUsedSignaturesAtRow(this.props.viewedPath, position.row),\n          menuX,\n          menuY,\n        });\n        this.forceUpdate();\n      };\n    }\n\n    this.gotoLine(this.props.viewedLine);\n  }\n\n  private gotoLine(line: number) {\n    this.editor.resize(true);\n    this.editor.scrollToLine(line, /* center */ false, /* animate */ true, () => {});\n    this.editor.gotoLine(line, 0, /* animate */ true);\n  }\n\n  shouldComponentUpdate(\n    nextProps: EditorViewProps,\n    nextState: EditorViewState\n  ) {\n    return (\n      nextProps.viewedPath !== this.props.viewedPath ||\n      nextProps.editorFont !== this.props.editorFont ||\n      nextProps.editorFontSize !== this.props.editorFontSize ||\n      nextState.annotations !== this.state.annotations\n    );\n  }\n\n  async componentDidUpdate(prevProps: EditorViewProps) {\n    if (prevProps.viewedPath !== this.props.viewedPath) {\n      if (this.scheduledFunction) {\n        this.scheduledFunction.flush();\n      }\n      await this.initializeEditor();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.scheduledFunction) {\n      this.scheduledFunction.cancel();\n    }\n  }\n\n  private areAnnotationsEqual(ann1: Annotation, ann2: Annotation): boolean {\n    return (\n      ann1.column === ann2.column &&\n      ann1.row === ann2.row &&\n      ann1.text === ann2.text &&\n      ann1.type === ann2.type\n    );\n  }\n\n  private check(viewedPath: string) {\n    return api.check().then((resp) => {\n      this.props.dispatch(\n        errorResultsUpdated(\n          resp.errors.map((err) => ({\n            row: err.row,\n            column: err.column,\n            message: err.message,\n            relativePath: err.path,\n          }))\n        )\n      );\n\n      const newAnnotations = resp.errors\n        .filter((err) => err.path === viewedPath)\n        .map(\n          (err) =>\n            ({\n              row: Math.max(0, err.row),\n              column: Math.max(0, err.column),\n              text: err.message,\n              type: 'error',\n            } as Annotation)\n        );\n\n      let annotationsDiffer = false;\n      if (this.state.annotations.length !== newAnnotations.length) {\n        annotationsDiffer = true;\n      } else {\n        for (let i = 0; i < this.state.annotations.length; i++) {\n          const thisAn = this.state.annotations[i];\n          const newAn = newAnnotations[i];\n          if (!this.areAnnotationsEqual(thisAn, newAn)) {\n            annotationsDiffer = true;\n            break;\n          }\n        }\n      }\n\n      if (annotationsDiffer) {\n        this.setState({ ...this.state, annotations: newAnnotations });\n      }\n    });\n  }\n\n  private async saveAndUpdateAnnotations(viewedPath: string, content: string) {\n    await api.writeFileResult(viewedPath, content);\n    await Promise.all([\n      this.check(viewedPath),\n      api\n        .getFileResult(viewedPath)\n        .then((fileResult) => this.props.onFileResultChanged(fileResult)),\n    ]);\n  }\n\n  private async initializeEditor() {\n    this.props.onFileResultChanged({\n      content: '',\n      entities: [],\n      errors: [],\n      relativePath: '',\n    });\n    await api.readPage(this.props.viewedPath).then((content) => {\n      this.editor.setValue(content);\n      this.editor.clearSelection();\n    });\n    await this.check(this.props.viewedPath);\n\n    const gutterElements = document.getElementsByClassName('ace_gutter');\n    if (gutterElements) {\n      for (const el of Array.from(gutterElements)) {\n        (el as any).style.backgroundColor = '#f5f5f8';\n        (el as any).style.borderRight = 'solid';\n        (el as any).style.borderRightWidth = '1px';\n        (el as any).style.borderRightColor = '#dddddd';\n      }\n    }\n\n    const contentElements = document.getElementsByClassName('ace_content');\n    if (contentElements) {\n      for (const el of Array.from(contentElements)) {\n        (el as any).style.borderTop = 'solid';\n        (el as any).style.borderTopColor = '#dddddd';\n        (el as any).style.borderTopWidth = '1px';\n      }\n    }\n  }\n\n  private getEssentialIndent(line: string) {\n    let i = 0;\n    while (i < line.length && (line[i] === ' ' || line[i] === '.')) {\n      i++;\n    }\n    return i;\n  }\n\n  private setupCompletions() {\n    langTools.setCompleters();\n    langTools.addCompleter({\n      getCompletions: async (\n        editor: any,\n        session: {},\n        pos: { row: number; column: number },\n        prefix: string,\n        callback: (n: null, arr: any[]) => void\n      ) => {\n        const curIndent = this.getEssentialIndent(editor.session.getLine(pos.row));\n        let sections: string[] = [];\n        let prevRow = pos.row - 1;\n        while (prevRow >= 0) {\n          const tmpLine: string = editor.session.getLine(prevRow);\n          if (tmpLine.trim().length === 0 || tmpLine.trim().startsWith('[')) {\n            break;\n          }\n          const indent = this.getEssentialIndent(tmpLine);\n          if (indent === curIndent) {\n            sections.unshift(tmpLine.substring(curIndent).replace('?:', ':').replace(/:.*/, ':'));\n          } else if (curIndent < indent) {\n            break;\n          }\n          prevRow--;\n        }\n\n        const remoteCompletions = (\n          await api.getSignatureSuffixes(`\\\\${prefix}`)\n        ).map((suffix) => ({\n          value: prefix + suffix,\n          caption: prefix + suffix,\n        }));\n\n        let completions: AceCompletion[] = [];\n        let completionIndex = 1;\n\n        if (sections.length > 0) {\n          for (const comp of BASE_COMPLETIONS) {\n            let allMatching = true;\n            let j = 0;\n            for (let i=0; i<sections.length; i++) {\n              let found = false;\n              while (j < comp.parts.length) {\n                const normalizedPart = comp.parts[j++]?.replace('[]\\n', '').replace('?:', ':');\n                if (sections[i] === normalizedPart) {\n                  found = true;\n                  break;\n                }\n              }\n\n              if (!found) {\n                allMatching = false;\n                break;\n              }\n            }\n\n            if (allMatching) {\n              const firstSection = sections[0]?.replace('[]\\n', '').replace('?:', ':');\n              if (firstSection) {\n                const index = comp.parts.map(p =>\n                  p.replace('[]\\n', '').replace('?:', ':')).indexOf(firstSection);\n                if (index >= 0) {\n                  for (let k=0; k<index; k++) {\n                    if (comp.parts[k].indexOf('?') === -1) {\n                      // there is a non-optional section\n                      allMatching = false;\n                      break;\n                    }\n                  }\n                }\n              }\n            }\n\n            if (allMatching) {\n              for (let i = 0; i < comp.parts.length; i++) {\n                const target = comp.parts[i]?.replace('[]\\n', '')?.replace('?:', ':');\n                if (target === sections[sections.length - 1]) {\n                  for (let j=i+1; j<comp.parts.length; j++) {\n                    const partWithoutQuestion = comp.parts[j]?.replace('[]\\n', '')?.replace('?:', ':');\n                    completions.push({\n                      value: partWithoutQuestion,\n                      caption: (comp.parts[j].indexOf('?:') >= 0 ?\n                        `${partWithoutQuestion} (optional)` :\n                        comp.parts[j]),\n                      score: 1.0/(completionIndex++),\n                    });\n                  }\n                  break;\n                }\n              }\n            }\n          }\n        }\n\n        if (prefix) {\n          for (const comp of BASE_COMPLETIONS) {\n            const first = comp.parts[0]?.replace('[]\\n', '')?.replace('?:', ':');\n            if (first && first.startsWith(prefix)) {\n              const partWithoutQuestion = comp.parts[0]?.replace('[]\\n', '')?.replace('?:', ':');\n              completions.push({\n                value: comp.parts[0],\n                caption: (comp.parts[0].indexOf('?:') >= 0 ?\n                        `${partWithoutQuestion} (optional)` :\n                        comp.parts[0]),\n                score: 1.0/(completionIndex++),\n              });\n            }\n          }\n        } else if (sections.length === 0) {\n          completions = completions.concat(BASE_COMPLETIONS.map(comp => {\n            const partWithoutQuestion = comp.parts[0]?.replace('[]\\n', '')?.replace('?:', ':');\n            return {\n              caption: (comp.parts[0].indexOf('?:') >= 0 ?\n                        `${partWithoutQuestion} (optional)` :\n                        comp.parts[0]),\n              value: comp.parts[0],\n            };\n          }));\n        }\n\n        if (prefix !== '') {\n          completions = completions.concat(remoteCompletions);\n        }\n\n        callback(null, completions);\n      },\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        {\n          this.state.showMenu ?\n          <div style={{\n            position: 'fixed',\n            left: this.state.menuX, top:\n            this.state.menuY,\n            zIndex: 100,\n            border: 'solid',\n            borderWidth: '1px',\n            borderColor: 'rgba(230, 230, 230)',\n            borderRadius: '2px',\n            boxShadow: 'rgba(0, 0, 0, 0.1) 0px 3px 10px, inset 0 0 0 0 rgba(240, 240, 240, 0.5)',\n          }}>\n            {\n              this.state.usedSignatures.map(usedSig =>\n              <button key={usedSig.signature}\n                className={styles.editorMenuItem}\n                onClick={() => {\n                  if (usedSig.defPath === this.props.viewedPath) {\n                    // if the line to view is in the current editor\n                    // just scroll to the line and close the context menu\n                    this.gotoLine(usedSig.defRow);\n                    this.setState({\n                      showMenu: false\n                    });\n                    this.forceUpdate();\n                  } else {\n                    this.props.onOpenFileInTab(usedSig.defPath, usedSig.defRow);\n                  }\n                }}>\n                {usedSig.signature}\n              </button>)\n            }\n          </div> : null\n        }\n        <AceEditor\n          ref={(ref) => {\n            const newEditor = ref?.editor;\n            if (newEditor && newEditor !== this.editor) {\n              this.editor = newEditor;\n              this.ref = ref;\n            }\n          }}\n          mode=\"yaml\"\n          theme=\"eclipse\"\n          onChange={() => {\n            if (this.scheduledFunction) {\n              this.scheduledFunction.cancel();\n            }\n            const viewedPath = this.props.viewedPath;\n            const content = this.editor.getValue();\n            this.scheduledFunction = debounce(async () => {\n              if (this.editor) {\n                await this.saveAndUpdateAnnotations(viewedPath, content);\n              }\n            }, 500);\n            this.scheduledFunction();\n          }}\n          name=\"ace-editor\"\n          editorProps={{ $blockScrolling: true }}\n          highlightActiveLine={false}\n          showPrintMargin={false}\n          enableBasicAutocompletion={true}\n          enableLiveAutocompletion={false}\n          tabSize={2}\n          setOptions={{\n            useSoftTabs: true,\n          }}\n          fontSize={`${this.props.editorFontSize}px`}\n          style={{\n            fontFamily: this.props.editorFont,\n            position: 'relative',\n            width: '100%',\n            height: '100vh',\n            minHeight: '100vh',\n            border: 'none',\n          }}\n          commands={[\n            {\n              name: 'save',\n              bindKey: {\n                win: 'Ctrl-s',\n                mac: 'Command-s',\n              },\n              exec: () => {\n                if (this.editor) {\n                  return this.saveAndUpdateAnnotations(\n                    this.props.viewedPath,\n                    this.editor.getValue()\n                  );\n                }\n              },\n            },\n          ]}\n          annotations={this.state.annotations}\n        ></AceEditor>\n      </div>\n    );\n  }\n}\n\nconst SideBySideView = (props: {\n  relativePath: string;\n  viewedLine: number;\n  errors: api.ErrorResult[];\n  entities: api.EntityResult[];\n  targetId: string;\n  onOpenFileInTab: (path: string, line?: number) => void;\n}) => {\n  const [relativePath, setRelativePath] = useState(props.relativePath);\n  const [errors, setErrors] = useState(props.errors);\n  const [entities, setEntities] = useState(props.entities);\n  const editorFont = useAppSelector(selectEditorFont);\n  const editorFontSize = useAppSelector(selectEditorFontSize);\n  const dispatch = useAppDispatch();\n\n  const onFileResultChanged = (result: api.FileResult) => {\n    if (result) {\n      setRelativePath(result.relativePath);\n      setErrors(result.errors);\n      setEntities(result.entities);\n    }\n  };\n\n  return <SplitPane>\n    <Pane>\n      <EditorView\n        dispatch={dispatch}\n        viewedPath={props.relativePath}\n        viewedLine={props.viewedLine}\n        onFileResultChanged={onFileResultChanged}\n        onOpenFileInTab={props.onOpenFileInTab}\n        editorFont={editorFont}\n        editorFontSize={editorFontSize}\n      />\n    </Pane>\n    <Pane>\n      <div style={{\n          height: '100vh',\n          overflow: 'scroll',\n          background: '#ffffff',\n          borderTop: 'solid',\n          borderTopColor: '#dddddd',\n          borderTopWidth: '1px'\n        }}>\n        <RenderedContent\n          relativePath={relativePath}\n          errors={errors}\n          entities={entities}\n          targetId={props.targetId}\n        />\n      </div>\n    </Pane>\n  </SplitPane>\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { AppThunk, RootState } from './store';\nimport * as api from '../services/api';\n\nexport interface PathsState {\n  paths: string[] | undefined;\n}\n\nconst initialState: PathsState = {\n  paths: [],\n};\n\nconst pathsSlice = createSlice({\n  name: 'paths',\n  initialState,\n  reducers: {\n    pathsUpdated(\n      state: PathsState,\n      action: PayloadAction<string[] | undefined>\n    ) {\n      if (!action.payload) {\n        state.paths = action.payload;\n      } else {\n        state.paths = [...action.payload];\n      }\n    },\n  },\n});\n\nexport const selectPaths = (state: RootState) => state.paths.paths;\n\nexport const { pathsUpdated } = pathsSlice.actions;\n\nexport const updatePathsForQuery =\n  (query: string): AppThunk =>\n  async (dispatch) => {\n    const paths = await api.search(query);\n    dispatch(pathsUpdated(paths));\n  };\n\nexport default pathsSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\nimport { isOnMobile } from '../support/util';\n\nexport interface SidePanelVisibleState {\n  sidePanelVisible: boolean;\n}\n\nconst initialState: SidePanelVisibleState = {\n  sidePanelVisible: !isOnMobile(),\n};\n\nconst sidePanelVisibleSlice = createSlice({\n  name: 'sidePanelVisible',\n  initialState,\n  reducers: {\n    sidePanelVisibilityChanged(\n      state: SidePanelVisibleState,\n      action: PayloadAction<boolean>\n    ) {\n      state.sidePanelVisible = action.payload;\n    },\n  },\n});\n\nexport const selectSidePanelVisible = (state: RootState) =>\n  state.sidePanelVisible.sidePanelVisible;\n\nexport const { sidePanelVisibilityChanged } = sidePanelVisibleSlice.actions;\n\nexport default sidePanelVisibleSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\n\nexport interface SelectedTabPathState {\n    path: string | undefined;\n}\n\nconst initialState: SelectedTabPathState = {\n    path: undefined\n};\n\nconst selectedTabPathSlice = createSlice({\n  name: 'query',\n  initialState,\n  reducers: {\n    selectedTabPathUpdated(state: SelectedTabPathState, action: PayloadAction<string>) {\n      state.path = action.payload;\n    },\n  },\n});\n\nexport const selectSelectedTabPath = (state: RootState) => state.selectedTabPath.path;\n\nexport const { selectedTabPathUpdated } = selectedTabPathSlice.actions;\n\nexport default selectedTabPathSlice.reducer;\n","import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './PathTreeItem.module.css';\n\nimport { sidePanelVisibilityChanged } from '../../store/sidePanelVisibleSlice';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\nimport { isOnMobile } from '../../support/util';\nimport { selectIsEditMode } from '../../store/isEditModeSlice';\nimport {\n  errorResultsUpdated,\n  selectErrorResults,\n} from '../../store/errorResultsSlice';\nimport * as api from '../../services/api';\nimport { pathsUpdated } from '../../store/pathsSlice';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faPencilAlt,\n  faTrashAlt,\n  faCheck,\n  faTimes,\n  faFolderPlus,\n  faFileMedical,\n  faCaretRight,\n  faCaretDown,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faWindowMaximize } from '@fortawesome/free-regular-svg-icons';\nimport { selectedTabPathUpdated, selectSelectedTabPath } from '../../store/selectedTabPathSlice';\n\nexport interface PathTreeNode {\n  name: string;\n  isDir: boolean;\n  isFirstMathFile: boolean;\n  path: string;\n  children: PathTreeNode[];\n}\n\nexport interface PathTreeItemProps {\n  node: PathTreeNode;\n  viewedPath: string;\n  onOpenFileInTab: (path: string) => void;\n}\n\nexport const PathTreeItem = (props: PathTreeItemProps) => {\n  const dispatch = useAppDispatch();\n  const [isExpanded, setIsExpanded] = useState(\n    props.node.isDir &&\n      (props.node.name === 'content' ||\n        props.viewedPath.startsWith(props.node.path))\n  );\n  const selectedTabPath = useAppSelector(selectSelectedTabPath);\n  const isEditMode = useAppSelector(selectIsEditMode);\n  const allErrorResults = useAppSelector(selectErrorResults);\n  const [inputName, setInputName] = useState('');\n  const [isEditing, setIsEditing] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const reloadAllPaths = async () => {\n    const allPaths = await api.getAllPaths();\n    dispatch(pathsUpdated(allPaths));\n    const res = await api.check();\n    dispatch(\n      errorResultsUpdated(\n        res.errors.map((err) => ({\n          row: err.row,\n          column: err.column,\n          message: err.message,\n          relativePath: err.path,\n        }))\n      )\n    );\n  };\n\n  const getAllErrorsFor = (\n    node: PathTreeNode,\n    allErrors: api.ErrorResult[]\n  ) => {\n    if (node.isDir) {\n      let result: api.ErrorResult[] = [];\n      for (const child of node.children) {\n        result = result.concat(getAllErrorsFor(child, allErrors));\n      }\n      return result;\n    }\n\n    return allErrorResults.filter((err) => err.relativePath === node.path);\n  };\n\n  const getErrorStats = (allErrorResults: api.ErrorResult[]) => {\n    const thisErrorResults = getAllErrorsFor(props.node, allErrorResults);\n    if (!isEditMode || thisErrorResults.length === 0) {\n      return null;\n    }\n    const title = thisErrorResults.length === 1 ? ' error' : ' errors';\n    return (\n      <span className={styles.errorStats}>\n        {' '}\n        ({thisErrorResults.length} {title})\n      </span>\n    );\n  };\n\n  let name = props.node.name;\n  if (!isEditMode) {\n    const index = name.indexOf('_');\n    if (index >= 0) {\n      const prefix = name.substring(0, index);\n      if (prefix.length > 0 && !isNaN(+prefix)) {\n        // the prefix is a number so trim it\n        name = name.substring(index + 1);\n      }\n    }\n    // remove the .math extension and replace underscores with spaces\n    name = name.replace('.math', '').replace(/_/g, ' ');\n  }\n\n  const updateInputName = async () => {\n    if (!inputName || (!props.node.isDir && !inputName.endsWith('.math'))) {\n      alert(\n        `The new filename must be non-empty and end in .math but found '${inputName}'`\n      );\n      return;\n    }\n    const newPathParts = props.node.path.split('/');\n    newPathParts.pop(); // pop the end\n    newPathParts.push(inputName); // append the new name\n    const newPath = newPathParts.join('/');\n    if (props.node.isDir) {\n      await api.renameDir(props.node.path, newPath);\n      await reloadAllPaths();\n    } else {\n      await api.renameFile(props.node.path, newPath);\n      await reloadAllPaths();\n    }\n  };\n\n  const onSubmit = (event: any) => {\n    event.preventDefault();\n    updateInputName();\n  };\n\n  const getEditButtons = () => {\n    return isEditMode ? (\n      <span>\n        <button\n          className={styles.button}\n          style={{\n            display:\n              props.node.path !== 'content' && !isEditing && !isDeleting && !props.node.isDir\n                ? 'inline'\n                : 'none',\n          }}\n          onClick={() => {\n            props.onOpenFileInTab(props.node.path);\n          }}>\n          <FontAwesomeIcon\n            icon={faWindowMaximize}\n            style={{\n              filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n            }}\n          />\n        </button>\n        <button\n          className={styles.button}\n          style={{\n            display:\n              props.node.path !== 'content' && !isEditing && !isDeleting\n                ? 'inline'\n                : 'none',\n          }}\n          onClick={() => {\n            setIsEditing(true);\n            setIsDeleting(false);\n          }}\n        >\n          <FontAwesomeIcon\n            icon={faPencilAlt}\n            style={{\n              filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n            }}\n          />\n        </button>\n        {props.node.isDir && !isEditing && !isDeleting ? (\n          <button\n            className={styles.button}\n            onClick={async () => {\n              const newPath = props.node.path\n                .split('/')\n                .concat('Untitled.math')\n                .join('/');\n              await api.newFile(newPath);\n              setIsExpanded(true);\n              await reloadAllPaths();\n            }}\n          >\n            <FontAwesomeIcon\n              icon={faFileMedical}\n              style={{\n                filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n              }}\n            />\n          </button>\n        ) : null}\n        {props.node.isDir && !isEditing && !isDeleting ? (\n          <button\n            className={styles.button}\n            onClick={async () => {\n              const newPath = props.node.path\n                .split('/')\n                .concat('Untitled')\n                .join('/');\n              await api.newDir(newPath);\n              setIsExpanded(true);\n              await reloadAllPaths();\n            }}\n          >\n            <FontAwesomeIcon\n              icon={faFolderPlus}\n              style={{\n                filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n              }}\n            />\n          </button>\n        ) : null}\n        <button\n          className={styles.button}\n          style={{ display: isEditing || isDeleting ? 'inline' : 'none' }}\n          onClick={async () => {\n            if (isEditing) {\n              await updateInputName();\n            } else {\n              if (props.node.isDir) {\n                await api.deleteDir(props.node.path);\n                await reloadAllPaths();\n              } else {\n                await api.deleteFile(props.node.path);\n                await reloadAllPaths();\n              }\n            }\n            setIsEditing(false);\n            setIsDeleting(false);\n          }}\n        >\n          <FontAwesomeIcon\n            icon={faCheck}\n            style={{\n              filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n            }}\n          />\n        </button>\n        <button\n          className={styles.button}\n          style={{ display: isEditing || isDeleting ? 'inline' : 'none' }}\n          onClick={() => {\n            setIsEditing(false);\n            setIsDeleting(false);\n          }}\n        >\n          <FontAwesomeIcon\n            icon={faTimes}\n            style={{\n              filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n            }}\n          />\n        </button>\n        <button\n          className={styles.button}\n          style={{\n            display:\n              props.node.path !== 'content' && !isEditing && !isDeleting\n                ? 'inline'\n                : 'none',\n          }}\n          onClick={() => {\n            setIsDeleting(true);\n            setIsEditing(false);\n          }}\n        >\n          <FontAwesomeIcon\n            icon={faTrashAlt}\n            style={{\n              filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n            }}\n          />\n        </button>\n      </span>\n    ) : null;\n  };\n\n  if (props.node.isDir) {\n    return (\n      <span\n        className={styles.sidePanelItem}\n        style={{\n          width: isEditMode ? 'max-content' : 'unset',\n          maxWidth: isEditMode ? 'max-content' : 'unset',\n        }}\n      >\n        <li\n          className={styles.mathlinguaListDirItem}\n          onClick={() => setIsExpanded(!isExpanded)}\n        >\n          {isExpanded ? (\n            <button className={styles.triangle}>\n              <FontAwesomeIcon\n                icon={faCaretDown}\n                style={{\n                  filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n                }}\n              />\n            </button>\n          ) : (\n            <button className={styles.triangle}>\n              <FontAwesomeIcon\n                icon={faCaretRight}\n                style={{\n                  filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n                }}\n              />\n            </button>\n          )}\n          {isEditing ? (\n            <form onSubmit={onSubmit}>\n              <input\n                className={styles.input}\n                type=\"text\"\n                placeholder={props.node.name}\n                onChange={(event) => setInputName(event.target.value)}\n              ></input>\n              {getEditButtons()}\n            </form>\n          ) : (\n            <span>\n              <span style={{ fontWeight: 'normal' }}>\n                {getErrorStats(allErrorResults)}\n              </span>\n              {' '}\n              {name}\n            </span>\n          )}\n          {!isEditing ? getEditButtons() : null}\n        </li>\n        {isExpanded ? (\n          <ul>\n            {props.node.children.map((child) => (\n              <PathTreeItem\n                key={child.name}\n                node={child}\n                viewedPath={props.viewedPath}\n                onOpenFileInTab={props.onOpenFileInTab}\n              />\n            ))}\n          </ul>\n        ) : null}\n      </span>\n    );\n  }\n\n  return (\n    <span\n      className={styles.sidePanelItem}\n      style={{\n        width: isEditMode ? 'max-content' : 'unset',\n        maxWidth: isEditMode ? 'max-content' : 'unset',\n      }}\n    >\n      <li className={styles.mathlinguaListFileItem}>\n        {isEditing ? (\n          <form onSubmit={onSubmit}>\n            <input\n              className={styles.input}\n              type=\"text\"\n              placeholder={props.node.name}\n              onChange={(event) => setInputName(event.target.value)}\n            ></input>\n            {getEditButtons()}\n          </form>\n        ) : (\n          <Link\n            to={`/${props.node.path}`}\n            key={props.node.name}\n            className={\n              (props.viewedPath === props.node.path &&\n                (!selectedTabPath || selectedTabPath === props.node.path)) ||\n              (selectedTabPath === props.node.path) ||\n              (props.viewedPath === '' && props.node.isFirstMathFile)\n                ? `${styles.link} ${styles.selected}`\n                : styles.link\n            }\n            onClick={() => {\n              if (isOnMobile()) {\n                dispatch(sidePanelVisibilityChanged(false));\n              }\n              dispatch(selectedTabPathUpdated(props.node.path))\n            }}\n          >\n            <span style={{ fontWeight: 'normal' }}>\n              {getErrorStats(allErrorResults)}\n            </span>\n            {' '}\n            {name}\n          </Link>\n        )}\n        {!isEditing ? getEditButtons() : null}\n      </li>\n    </span>\n  );\n};\n","import styles from './SidePanel.module.css';\n\nimport { useEffect, useState } from 'react';\nimport { pathsUpdated, selectPaths } from '../../store/pathsSlice';\nimport * as api from '../../services/api';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\nimport { ErrorView } from '../error-view/ErrorView';\nimport { PathTreeItem, PathTreeNode } from '../path-tree-item/PathTreeItem';\nimport { selectIsEditMode } from '../../store/isEditModeSlice';\n\nexport interface SidePanelProps {\n  viewedPath: string;\n  onOpenFileInTab: (path: string) => void;\n}\n\nexport const SidePanel = (props: SidePanelProps) => {\n  const dispatch = useAppDispatch();\n  const paths = useAppSelector(selectPaths);\n  const isEditMode = useAppSelector(selectIsEditMode);\n\n  const [allPaths, setAllPaths] = useState([] as string[]);\n  const [error, setError] = useState('');\n  const [pathData, setPathData] = useState({\n    name: '',\n    isDir: true,\n    isFirstMathFile: false,\n    path: '',\n    children: [],\n  } as PathTreeNode);\n\n  useEffect(() => {\n    api\n      .getAllPaths()\n      .then((paths) => {\n        setAllPaths(paths);\n        dispatch(pathsUpdated(paths));\n      })\n      .catch((err) => setError(err.message));\n  }, [dispatch]);\n\n  useEffect(() => {\n    const pathsToView = paths ?? allPaths;\n    setPathData(allPathsToTreeNode(pathsToView));\n  }, [allPaths, paths]);\n\n  const errorView = (\n    <div className={styles.sidePanel}>\n      <ErrorView message={error} />\n    </div>\n  );\n\n  // if in editing mode show the 'content' directory\n  const start = isEditMode ? pathData : pathData.children[0];\n\n  let items = start?.children?.map((node) => (\n    <PathTreeItem\n      key={node.name}\n      node={node}\n      viewedPath={props.viewedPath}\n      onOpenFileInTab={props.onOpenFileInTab}\n    />\n  ));\n\n  if (!isEditMode && items) {\n    items = items.concat(<PathTreeItem\n      key='index'\n      node={{\n        name: 'Index',\n        path: 'index',\n        isDir: false,\n        isFirstMathFile: false,\n        children: [],\n      }}\n      viewedPath={props.viewedPath}\n      onOpenFileInTab={props.onOpenFileInTab} />);\n  }\n\n  const sidePanel = (\n    <div\n      className={styles.sidePanel}\n      style={\n        isEditMode\n          ? {\n              height: 'calc(100vh - 1.75em)',\n              overflow: 'auto',\n            }\n          : {}\n      }\n    >\n      {items}\n    </div>\n  );\n\n  return error ? errorView : sidePanel;\n};\n\nfunction allPathsToTreeNode(allPaths: string[]): PathTreeNode {\n  const root: PathTreeNode = {\n    name: '',\n    isDir: true,\n    isFirstMathFile: false,\n    path: '',\n    children: [],\n  };\n  const isFirstMathFileFound: [boolean] = [false];\n  for (const path of allPaths) {\n    populateTreeNode(root, path, isFirstMathFileFound);\n  }\n  return root;\n}\n\nfunction populateTreeNode(\n  root: PathTreeNode,\n  path: string,\n  isFirstMathFileFound: [boolean]\n) {\n  const parts = path.split('/');\n  let cur = root;\n  for (let i = 0; i < parts.length; i++) {\n    const p = parts[i];\n    const child = cur.children.find((child) => child.name === p);\n    if (child) {\n      cur = child;\n    } else {\n      const isDir = i !== parts.length - 1;\n      let isFirstMathFile = false;\n      if (!isFirstMathFileFound[0] && !isDir) {\n        isFirstMathFile = true;\n        isFirstMathFileFound[0] = true;\n      }\n      const newChild: PathTreeNode = {\n        name: p,\n        isDir,\n        isFirstMathFile,\n        path: parts.slice(0, i + 1).join('/'),\n        children: [],\n      };\n      cur.children.push(newChild);\n      cur = newChild;\n    }\n  }\n}\n","import styles from './SidePanelButton.module.css';\n\nimport {\n  selectSidePanelVisible,\n  sidePanelVisibilityChanged,\n} from '../../store/sidePanelVisibleSlice';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars } from '@fortawesome/free-solid-svg-icons';\n\nexport const SidePanelButton = () => {\n  const visible = useAppSelector(selectSidePanelVisible);\n  const dispatch = useAppDispatch();\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        padding: 0,\n        marginLeft: 0,\n        marginRight: 0,\n        marginTop: 0,\n        marginBottom: 'auto',\n      }}\n    >\n      <button\n        className={styles.sidePanelButton}\n        onClick={() => {\n          dispatch(sidePanelVisibilityChanged(!visible));\n        }}\n      >\n        <FontAwesomeIcon\n          icon={faBars}\n          style={{\n            filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n          }}\n        />\n      </button>\n    </div>\n  );\n};\n","import { useEffect, useRef, useState } from 'react';\nimport styles from './SearchPanel.module.css';\n\nimport * as api from '../../services/api';\n\nimport { pathsUpdated, updatePathsForQuery } from '../../store/pathsSlice';\nimport { useDispatch } from 'react-redux';\nimport { queryUpdated } from '../../store/querySlice';\nimport { sidePanelVisibilityChanged } from '../../store/sidePanelVisibleSlice';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch, faTimes } from '@fortawesome/free-solid-svg-icons';\n\ninterface Suggestion {\n  complete: string;\n  suffix: string;\n}\n\nexport const SearchPanel = () => {\n  const dispatch = useDispatch();\n  const ref = useRef(null);\n  const [query, setQuery] = useState('');\n  const [dropdownDisplayStyle, setDropdownDisplayStyle] = useState('none');\n  const [suggestions, setSuggestions] = useState([] as Suggestion[]);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n\n  function getLastQueryWord(text: string): string {\n    if (!text) {\n      return text;\n    }\n    const words = text.split(' ').filter((it: string) => it.length > 0);\n    return words[words.length - 1];\n  }\n\n  function setDropDownVisible(visible: boolean) {\n    setDropdownDisplayStyle(visible ? 'block' : 'none');\n  }\n\n  async function handleChange(event: any) {\n    const text = event.target.value || '';\n    const lastWord = getLastQueryWord(text);\n    try {\n      const suffixes = await api.getAutocompleteSuffixes(lastWord);\n      setSuggestions(\n        suffixes.map((suffix) => ({\n          complete: lastWord + suffix,\n          suffix,\n        }))\n      );\n    } catch (err: any) {\n      const message = `ERROR: ${err.message}`;\n      setSuggestions([\n        {\n          complete: message,\n          suffix: message,\n        },\n      ]);\n    }\n    setDropDownVisible(true);\n    setQuery(text);\n  }\n\n  async function search(query: string) {\n    dispatch(updatePathsForQuery(query));\n    setDropDownVisible(false);\n    dispatch(queryUpdated(query));\n    dispatch(sidePanelVisibilityChanged(true));\n  }\n\n  function clearSearch() {\n    setQuery('');\n    setDropDownVisible(false);\n    dispatch(pathsUpdated(undefined));\n    dispatch(queryUpdated(''));\n    dispatch(sidePanelVisibilityChanged(true));\n  }\n\n  function appendSuggestionSuffix(suffix: string) {\n    const completeQuery = query.toLowerCase() + suffix.toLowerCase();\n    setQuery(completeQuery);\n    setDropDownVisible(false);\n    return completeQuery;\n  }\n\n  useEffect(() => {\n    document.addEventListener('click', (event) => {\n      if (ref.current && !(ref.current as any).contains(event.target)) {\n        setDropDownVisible(false);\n      }\n    });\n  }, []);\n\n  async function onKeyUp(e: any) {\n    if (e.key === 'Escape') {\n      setDropDownVisible(false);\n      return;\n    } else if (e.key === 'Enter') {\n      e.preventDefault();\n      if (dropdownDisplayStyle !== 'none') {\n        const selectedSuggestion = suggestions[selectedIndex];\n        let queryToUse = query;\n        if (selectedSuggestion) {\n          queryToUse = appendSuggestionSuffix(selectedSuggestion.suffix);\n        }\n        await search(queryToUse);\n      } else {\n        await search(query);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      setDropDownVisible(true);\n      setSelectedIndex(Math.min(selectedIndex + 1, suggestions.length - 1));\n      return;\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      setDropDownVisible(true);\n      setSelectedIndex(Math.max(selectedIndex - 1, 0));\n      return;\n    }\n  }\n\n  return (\n    <span className={styles.searchArea}>\n      <input\n        type=\"text\"\n        id=\"search-input\"\n        className={styles.search}\n        aria-label=\"search\"\n        value={query}\n        onChange={handleChange}\n        onKeyUp={onKeyUp}\n      />\n      <button\n        type=\"button\"\n        className={styles.searchButton}\n        onClick={() => search(query)}\n      >\n        <FontAwesomeIcon\n          icon={faSearch}\n          style={{\n            filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n          }}\n        />\n      </button>\n      <button\n        type=\"button\"\n        className={styles.clearButton}\n        onClick={clearSearch}\n      >\n        <FontAwesomeIcon\n          icon={faTimes}\n          style={{\n            filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n          }}\n        />\n      </button>\n      <div\n        ref={ref}\n        className={styles.searchDropdown}\n        style={{ display: dropdownDisplayStyle }}\n      >\n        {suggestions.map((suggestion, index) => (\n          <div\n            key={suggestion.complete.toLowerCase()}\n            onClick={() => {\n              const newQuery = appendSuggestionSuffix(suggestion.suffix);\n              return search(newQuery);\n            }}\n            className={\n              index === selectedIndex\n                ? styles.searchDropdownItemSelected\n                : styles.searchDropdownItem\n            }\n          >\n            <div>{suggestion.complete.toLowerCase()}</div>\n          </div>\n        ))}\n      </div>\n    </span>\n  );\n};\n","import styles from './GitHubIcon.module.css';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGithub } from '@fortawesome/free-brands-svg-icons';\nimport { useEffect, useState } from 'react';\nimport { getGitHubUrl } from '../../services/api';\n\nexport const GitHubIcon = () => {\n  const [url, setUrl] = useState('' as string | undefined);\n\n  useEffect(() => {\n    getGitHubUrl().then((url) => setUrl(url));\n  }, []);\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        padding: 0,\n        marginLeft: 0,\n        marginRight: 0,\n        marginTop: 0,\n        marginBottom: 'auto',\n      }}\n    >\n      {url ? (\n        <a href={url} target=\"_blank\">\n          <FontAwesomeIcon\n            className={styles.githubIcon}\n            icon={faGithub}\n            style={{\n              filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n            }}\n          />\n        </a>\n      ) : (\n        <FontAwesomeIcon\n          className={styles.githubIcon}\n          icon={faGithub}\n          style={{\n            filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n          }}\n        />\n      )}\n    </div>\n  );\n};\n","import { check } from '../../services/api';\nimport { errorResultsUpdated } from '../../store/errorResultsSlice';\nimport {\n  isEditModeUpdated,\n  selectIsEditMode,\n} from '../../store/isEditModeSlice';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\nimport styles from './EditModeButton.module.css';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEdit, faEye } from '@fortawesome/free-solid-svg-icons';\n\nexport const EditModeButton = () => {\n  const dispatch = useAppDispatch();\n  const isEditMode = useAppSelector(selectIsEditMode);\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        padding: 0,\n        marginLeft: 0,\n        marginRight: 0,\n        marginTop: 0,\n        marginBottom: 'auto',\n      }}\n    >\n      <button\n        className={styles.editModeButton}\n        data-test-id=\"edit-mode-button\"\n        onClick={async () => {\n          dispatch(isEditModeUpdated(!isEditMode));\n          const res = await check();\n          dispatch(\n            errorResultsUpdated(\n              res.errors.map((err) => ({\n                row: err.row,\n                column: err.column,\n                message: err.message,\n                relativePath: err.path,\n              }))\n            )\n          );\n        }}\n      >\n        {isEditMode ? (\n          <FontAwesomeIcon\n            icon={faEye}\n            style={{\n              filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n            }}\n          />\n        ) : (\n          <FontAwesomeIcon\n            icon={faEdit}\n            style={{\n              filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n            }}\n          />\n        )}\n      </button>\n    </div>\n  );\n};\n","import styles from './HelpButton.module.css';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\n\nexport const HelpButton = () => {\n  return (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        padding: 0,\n        marginLeft: 0,\n        marginRight: 0,\n        marginTop: 0,\n        marginBottom: 'auto',\n      }}\n    >\n      <a href=\"#/help\" target=\"_blank\">\n        <FontAwesomeIcon\n          className={styles.helpIcon}\n          icon={faQuestionCircle}\n          style={{\n            filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n          }}\n        />\n      </a>\n    </div>\n  );\n};\n","import styles from './TopBar.module.css';\n\nimport { SidePanelButton } from '../side-panel-button/SidePanelButton';\nimport { SearchPanel } from '../search-panel/SearchPanel';\nimport { GitHubIcon } from '../github-icon/GitHubIcon';\nimport { isStatic } from '../../services/api';\nimport { EditModeButton } from '../edit-mode-button/EditModeButton';\nimport { HelpButton } from '../help-button/HelpButton';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\nimport { editorFontUpdated, selectEditorFont } from '../../store/editorFontSlice';\nimport { editorFontSizeUpdated, selectEditorFontSize } from '../../store/editorFontSizeSlice';\nimport { selectIsEditMode } from '../../store/isEditModeSlice';\n\nexport const TopBar = () => {\n  const dispatch = useAppDispatch();\n  const font = useAppSelector(selectEditorFont);\n  const fontSize = useAppSelector(selectEditorFontSize);\n  const isEditMode = useAppSelector(selectIsEditMode);\n\n  const editorControls = (\n    <>\n      <select style={{\n          border: 'solid',\n          borderWidth: '1px',\n          borderRadius: '1px',\n          borderColor: '#cccccc',\n          background: 'white',\n          marginRight: '1em',\n          paddingLeft: '1ex'\n        }}\n        defaultValue={font}\n        onClick={(event: any) => {\n          const font = event.target?.value;\n          if (font) {\n            window.localStorage.setItem('mlg.editorFont', font);\n            dispatch(editorFontUpdated(font));\n          }\n        }}>\n        <option value='Anonymous Pro'>Anonymous Pro</option>\n        <option value='CMU Typewriter Text'>CMU Typewriter Text</option>\n        <option value='Courier Prime'>Courier Prime</option>\n        <option value='Cousine'>Cousine</option>\n        <option value='Cutive Mono'>Cutive Mono</option>\n        <option value='Fira Code'>Fira Code</option>\n        <option value='Fira Mono'>Fira Mono</option>\n        <option value='Inconsolata'>Inconsolata</option>\n        <option value='Libertinus Mono'>Libertinus Mono</option>\n        <option value='Nova Mono'>Nova Mono</option>\n        <option value='Noto Sans Mono'>Noto Sans Mono</option>\n        <option value='PT Mono'>PT Mono</option>\n        <option value='Red Hat Mono'>Red Hat Mono</option>\n        <option value='Roboto Mono'>Roboto Mono</option>\n        <option value='Share Tech Mono'>Share Tech Mono</option>\n        <option value='Source Code Pro'>Source Code Pro</option>\n        <option value='Space Mono'>Space Mono</option>\n        <option value='Syne Mono'>Syne Mono</option>\n        <option value='The Good Monolith'>The Good Monolith</option>\n        <option value='Ubuntu Mono'>Ubuntu Mono</option>\n      </select>\n      <select style={{\n          border: 'solid',\n          borderWidth: '1px',\n          borderRadius: '1px',\n          borderColor: '#cccccc',\n          background: 'white',\n          marginRight: '1em',\n          paddingLeft: '1ex'\n        }}\n        defaultValue={fontSize}\n        onClick={(event: any) => {\n          const fontSize = event.target?.value;\n          if (fontSize) {\n            window.localStorage.setItem('mlg.editorFontSize', fontSize);\n            dispatch(editorFontSizeUpdated(fontSize));\n          }\n        }}>\n        <option value='8'>8</option>\n        <option value='9'>9</option>\n        <option value='10'>10</option>\n        <option value='11'>11</option>\n        <option value='12'>12</option>\n        <option value='13'>13</option>\n        <option value='14'>14</option>\n        <option value='15'>15</option>\n        <option value='16'>16</option>\n        <option value='17'>17</option>\n        <option value='18'>18</option>\n        <option value='19'>19</option>\n        <option value='20'>20</option>\n        <option value='21'>21</option>\n        <option value='22'>22</option>\n        <option value='23'>23</option>\n        <option value='24'>24</option>\n        <option value='25'>25</option>\n        <option value='26'>26</option>\n        <option value='27'>27</option>\n        <option value='28'>28</option>\n        <option value='29'>29</option>\n        <option value='30'>30</option>\n      </select>\n    </>\n  );\n\n  return (\n    <div className={styles.topbar}>\n      <SidePanelButton />\n      <SearchPanel />\n      {isEditMode ? editorControls : null}\n      {isStatic() ? null : <EditModeButton />}\n      <GitHubIcon />\n      <HelpButton />\n    </div>\n  );\n};\n","\nimport styles from './SignatureIndex.module.css';\n\nimport * as api from '../../services/api';\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport RenderedComponent from '../rendered-component/RenderedComponent';\n\nexport const SignatureIndex = () => {\n  const [index, setIndex] = useState({ entries: [] } as api.SignatureIndex);\n\n  useEffect(() => {\n    api.getSignatureIndex().then(setIndex)\n  }, []);\n\n  const calledPairs: Array<{ name: string; entry: api.SignatureIndexEntry; }> = [];\n  for (const entry of index.entries) {\n    for (const name of entry.called) {\n      calledPairs.push({\n        name,\n        entry\n      });\n    }\n  }\n\n  function removeMathLaTeX(text: string) {\n    const trimmed = text.trim();\n    if (trimmed.startsWith('$') && trimmed.endsWith('$')) {\n      // it is of the form `$\\textbf{sometext} some math \\textbf{more text}$`\n      const middle = trimmed.substring(1, trimmed.length - 1);\n      return middle.replace(/\\\\[a-zA-Z]+/g, '')\n                   .replace(/\\{/g, '')\n                   .replace(/\\}/g, '')\n                   .replace(/[a-zA-Z]+\\?/g, '')\n                   .toUpperCase()\n                   .trim();\n    }\n\n    // it is of the form `some text $some math$ more text`\n    return text.replace(/\\$\\$.*?\\$\\$/g, '')\n               .replace(/\\$.*?\\$/g, '')\n               .replace(/\\(.*?\\)/g, '')\n               .replace(/\\[.*?\\]/g, '')\n               .replace(/\"/g, '')\n               .toUpperCase()\n               .trim();\n  }\n\n  return <div className={styles.indexPage}>\n    <h1>Index by Name</h1>\n    <ul className={styles.indexList}>\n    {\n      calledPairs.sort((pair1, pair2) => {\n        const name1 = removeMathLaTeX(pair1.name);\n        const name2 = removeMathLaTeX(pair2.name);\n        return name1.localeCompare(name2);\n      }).map(\n          (pair, index) =><li className={styles.indexListItem}\n                     key={index}>\n            <Link className={styles.indexListCalledLink}\n                  to={`${pair.entry.relativePath}#${pair.entry.id}`}>\n              <RenderedComponent html={pair.name} />\n            </Link>\n            <span className={styles.indexItemCalledLocation}>\n              {pair.entry.relativePath\n                    .replace(/\\d+((\\\\.)?\\d+)?_/g, '')\n                    .replace(/_/g, ' ')\n                    .replace(/\\.math/g, '')\n                    .replace(/content\\//, '')\n                    .replace(/\\//g, '  ')}\n            </span>\n          </li>)\n    }\n    </ul>\n    <h1>Index by Signature</h1>\n    <ul className={styles.indexList}>\n    {\n      index.entries.filter(entry => !!entry.signature).sort((entry1, entry2) => {\n        const sig1 = entry1.signature || '';\n        const sig2 = entry2.signature || '';\n        return sig1.localeCompare(sig2);\n      }).map(\n          (entry, index) =><li className={styles.indexListItem}\n                               key={index}>\n            <Link className={styles.indexItemLink}\n                  to={`${entry.relativePath}#${entry.id}`}>\n                {entry.signature}\n            </Link>\n            <div className={styles.indexItemLocation}>\n              {entry.relativePath\n                    .replace(/\\d+((\\\\.)?\\d+)?_/g, '')\n                    .replace(/_/g, ' ')\n                    .replace(/\\.math/g, '')\n                    .replace(/content\\//, '')\n                    .replace(/\\//g, '  ')}\n            </div>\n          </li>)\n    }\n    </ul>\n  </div>;\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\n\nexport interface IsFullscreenState {\n  isFullscreen: boolean;\n}\n\nconst initialState: IsFullscreenState = {\n    isFullscreen: false\n};\n\nconst isFullscreenSlice = createSlice({\n  name: 'isFullscreen',\n  initialState,\n  reducers: {\n    isFullscreenUpdated(state: IsFullscreenState, action: PayloadAction<boolean>) {\n      state.isFullscreen = action.payload;\n    },\n  },\n});\n\nexport const selectIsFullscreen = (state: RootState) =>\n  state.isFullscreen.isFullscreen;\n\nexport const { isFullscreenUpdated } = isFullscreenSlice.actions;\n\nexport default isFullscreenSlice.reducer;\n","import { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport 'react-tabs/style/react-tabs.css';\n\nimport styles from './ContentPanel.module.css';\n\nimport { useLocation } from 'react-router';\nimport { Page } from '../page/Page';\nimport { SidePanel } from '../side-panel/SidePanel';\nimport { selectIsEditMode } from '../../store/isEditModeSlice';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\nimport {\n  selectSidePanelVisible,\n} from '../../store/sidePanelVisibleSlice';\nimport { useEffect, useRef, useState } from 'react';\nimport * as api from '../../services/api';\nimport { TopBar } from '../topbar/TopBar';\nimport { SignatureIndex } from '../signature-index/SignatureIndex';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { selectedTabPathUpdated } from '../../store/selectedTabPathSlice';\nimport { isFullscreenUpdated, selectIsFullscreen } from '../../store/isFullscreenSlice';\nimport {\n  faCaretUp,\n  faCaretDown\n} from '@fortawesome/free-solid-svg-icons';\n\nimport SplitPane from 'react-split-pane';\nimport { isOnMobile } from '../../support/util';\nconst Pane = require('react-split-pane/lib/Pane');\n\nexport interface HashLocation {\n  viewedPath: string;\n  targetId: string;\n  line: number;\n}\n\nfunction getHashLocation(location: {\n  pathname: string;\n  hash: string;\n  search: string;\n}): HashLocation {\n  return {\n    viewedPath: location.pathname.replace(/^\\//, ''),\n    targetId: location.hash.replace(/^#/, ''),\n    line: Number(location.search.replace(/^\\?line=/, '') || 0)\n  };\n}\n\nexport interface ContentPanelProps {\n  redirect: (relativePath: string) => void;\n  onLocationChanged: (path: string) => void;\n}\n\nexport const ContentPanel = (props: ContentPanelProps) => {\n  const hashLocation = getHashLocation(useLocation());\n  const isEditMode = useAppSelector(selectIsEditMode);\n  const isSidePanelVisible = useAppSelector(selectSidePanelVisible);\n  const isFullscreen = useAppSelector(selectIsFullscreen);\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    props.onLocationChanged(hashLocation.viewedPath);\n  }, [hashLocation]);\n\n  useEffect(() => {\n    if (hashLocation.viewedPath === '') {\n      api.getFirstPath().then((path) => props.redirect(path));\n    }\n  }, []);\n\n  // If the viewedPath is empty, then don't show anything.  The\n  // effect above will redirect to the first page.\n  if (hashLocation.viewedPath === '') {\n    return null;\n  }\n\n  const innerPanel = isEditMode ? (\n    <TwoColumnContent\n      hashLocation={hashLocation}\n      isSidePanelVisible={isSidePanelVisible}\n    ></TwoColumnContent>\n  ) : (\n    <ThreeColumnContent\n      hashLocation={hashLocation}\n      startedWithSidePanelVisible={isSidePanelVisible}\n    ></ThreeColumnContent>\n  );\n\n  return (\n    <div>\n      {isFullscreen ? null : <TopBar />}\n      {\n        isEditMode ?\n        <span style={{\n            position: 'absolute',\n            right: '0',\n            paddingTop: '2ex',\n            paddingRight: '1.5ex',\n          }}>\n          <button\n            style={{\n              border: 'none',\n              background: 'transparent',\n            }}\n            onClick={() => {\n              dispatch(isFullscreenUpdated(!isFullscreen))\n          }}>\n            <FontAwesomeIcon\n              icon={isFullscreen ? faCaretDown : faCaretUp}\n              style={{\n                filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n                fontSize: '110%',\n              }}\n            />\n          </button>\n        </span> : null\n      }\n      {innerPanel}\n    </div>\n  );\n};\n\nconst ThreeColumnContent = (props: {\n  hashLocation: HashLocation;\n  startedWithSidePanelVisible: boolean;\n}) => {\n  const isSidePanelVisible = useAppSelector(selectSidePanelVisible);\n  const [isNarrow, setIsNarrow] = useState(isOnMobile());\n\n  useEffect(() => {\n    const updateIsNarrow = () => {\n      setIsNarrow(isOnMobile());\n    };\n    window.addEventListener('resize', updateIsNarrow);\n    return () => {\n      window.removeEventListener('resize', updateIsNarrow);\n    };\n  }, []);\n\n  if (isNarrow && window.innerWidth < 1024) {\n    return <div style={{\n      marginTop: '0.75em',\n      display: 'grid',\n      gridTemplateColumns: '2.5% 95% 2.5%',\n    }}>\n      <div>\n        {\n          isSidePanelVisible ?\n          <div style={{\n              position: 'relative',\n              zIndex: '10',\n              background: '#ffffff',\n              borderColor: '#dddddd',\n              boxShadow: '0px 1px 5px rgba(0, 0, 0, .2)',\n              height: '100%',\n              width: 'max-content',\n              minWidth: 'fit-content',\n              paddingTop: '0.3em',\n            }}>\n            <SidePanel viewedPath={props.hashLocation.viewedPath}\n                       onOpenFileInTab={() => {}} />\n          </div> : null\n        }\n      </div>\n      <div>\n        {\n          (props.hashLocation.viewedPath === 'index') ?\n          <SignatureIndex /> :\n          <Page\n            viewedPath={props.hashLocation.viewedPath}\n            viewedLine={props.hashLocation.line}\n            targetId={props.hashLocation.targetId}\n            onOpenFileInTab={() => {}}\n          />\n        }\n      </div>\n      <div></div>\n    </div>;\n  }\n\n  return <div style={{\n    marginTop: '0.75em',\n    display: 'grid',\n    gridTemplateColumns: '22.5% 55% 22.5%',\n  }}>\n    <div style={{ marginTop: '-0.3em' }}>\n      { isSidePanelVisible ?\n        <SidePanel viewedPath={props.hashLocation.viewedPath}\n                   onOpenFileInTab={() => {}} /> : null }\n    </div>\n    <div>\n      {\n        (props.hashLocation.viewedPath === 'index') ?\n        <SignatureIndex /> :\n        <Page\n          viewedPath={props.hashLocation.viewedPath}\n          viewedLine={props.hashLocation.line}\n          targetId={props.hashLocation.targetId}\n          onOpenFileInTab={() => {}}\n        />\n      }\n    </div>\n    <div></div>\n  </div>;\n};\n\nconst TwoColumnContent = (props: {\n  hashLocation: HashLocation;\n  isSidePanelVisible: boolean;\n}) => {\n  const dispatch = useAppDispatch();\n  const [locations, setLocations] = useState([] as HashLocation[]);\n  const [sidePanelSize, setSidePanelSize] = useState('20%');\n\n  const getViewedLocationIndex = (path: string) => {\n    return locations.findIndex(location =>\n      location.viewedPath === path);\n  };\n\n  const [selectedIndex, setSelectedIndex] = useState(\n    Math.max(0, getViewedLocationIndex(props.hashLocation.viewedPath)));\n\n  // the react-split-pane resizer for the side panel is 0.5em too\n  // high and the only way, it appears, to fix that is to find the\n  // resizer and change its style dynamically\n  useEffect(() => {\n    const divs = document.getElementsByTagName('div');\n    for (let i=0; i<divs.length; i++) {\n      const div = divs[i];\n      if (div?.dataset?.type === 'Resizer') {\n        div.style.marginTop = '0.5em';\n      }\n    }\n  }, [props.isSidePanelVisible]);\n\n  const selectIndex = (index: number) => {\n    setSelectedIndex(index);\n    const location = locations[index];\n    if (location) {\n      dispatch(selectedTabPathUpdated(location.viewedPath));\n    }\n  };\n\n  useEffect(() => {\n    const viewedLocation = props.hashLocation;\n    const viewedLocationIndex = getViewedLocationIndex(viewedLocation.viewedPath);\n    if (locations.length === 0) {\n      setLocations([viewedLocation]);\n    } else if (viewedLocationIndex >= 0) {\n      // the selected path is already in the list so just switch to it\n      selectIndex(viewedLocationIndex);\n    } else {\n      const newSelectedIndex = selectedIndex >= locations.length ? 0 : selectedIndex;\n      // make a copy of the locations and update `selectedIndex` to point to `viewedLocation`\n      const newLocations: HashLocation[] = locations.map(location => ({\n        viewedPath: location.viewedPath,\n        targetId: location.targetId,\n        line: location.line\n      }));\n      newLocations[newSelectedIndex] = {\n        viewedPath: viewedLocation.viewedPath,\n        targetId: viewedLocation.targetId,\n        line: viewedLocation.line\n      };\n      setLocations(newLocations);\n      setSelectedIndex(newSelectedIndex);\n    }\n  }, [props.hashLocation]);\n\n  const openFileInTab = (path: string, line?: number) => {\n    const index = getViewedLocationIndex(path);\n    if (index >= 0) {\n      if (line !== undefined) {\n        setLocations(locations.map((location, i) => {\n          if (i == index) {\n            return {\n              viewedPath: location.viewedPath,\n              targetId: location.targetId,\n              line\n            };\n          } else {\n            return location;\n          }\n        }));\n      }\n      selectIndex(index);\n    } else {\n      //  the path isn't in the list so add it\n      const newLocations = locations.concat({\n        viewedPath: path,\n        targetId: '',\n        line: line ?? 0\n      });\n      setLocations(newLocations);\n\n      // If `line !== undefined` then the opening of a new tab was because\n      // the user used the context menu to look for the definition of a\n      // signature.  In that case, a new tab was opened in the background as\n      // the last tab, so select that tab.\n      if (line !== undefined) {\n        setSelectedIndex(newLocations.length - 1);\n      }\n    }\n  };\n\n  return <SplitPane onChange={(size) => setSidePanelSize(`${size}px`)}>\n    {props.isSidePanelVisible ? (\n      <Pane initialSize={sidePanelSize}>\n        <SidePanel viewedPath={props.hashLocation.viewedPath}\n                   onOpenFileInTab={openFileInTab} />\n      </Pane>\n    ) : null}\n    <Pane>\n      <div style={{\n          marginTop: '0.5em',\n          borderTop: 'solid',\n          borderTopWidth: '1px',\n          borderTopColor: '#aaaaaa',\n        }}>\n        <TabbedView locations={locations}\n                    selectedIndex={selectedIndex}\n                    setSelectedIndex={selectIndex}\n                    onClose={(path) => {\n                      setLocations(locations.filter(location =>\n                        location.viewedPath !== path))\n                    }}\n                    onOpenFileInTab={openFileInTab} />\n      </div>\n    </Pane>\n  </SplitPane>;\n};\n\nconst getLastPathLocation = (path: string) => {\n  const parts = path.split('/');\n  if (parts.length === 0) {\n    return path;\n  }\n\n  return parts[parts.length - 1];\n}\n\nconst TabbedView = (props: {\n  selectedIndex: number | undefined;\n  locations: HashLocation[];\n  onClose: (path: string) => void;\n  setSelectedIndex: (index: number) => void;\n  onOpenFileInTab: (path: string, line?: number) => void;\n}) => {\n  if (props.locations.length === 1) {\n    const location = props.locations[0];\n    return (\n      <Page\n        viewedPath={location.viewedPath}\n        viewedLine={location.line}\n        targetId={location.targetId}\n        onOpenFileInTab={props.onOpenFileInTab}\n      />\n    );\n  }\n\n  return (\n    <Tabs selectedIndex={props.selectedIndex}\n          onSelect={(index) => props.setSelectedIndex(index)}>\n      <TabList style={{ margin: '0' }}>\n        {\n          props.locations.map((location, index) =>\n            <Tab key={index}\n                 selectedClassName={styles.selectedTab}>\n              {getLastPathLocation(location.viewedPath)}\n              <button className={styles.button}>\n                <FontAwesomeIcon\n                  icon={faTimes}\n                  style={{\n                    filter: 'drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))',\n                  }}\n                  onClick={() => props.onClose(location.viewedPath)}\n                />\n              </button>\n            </Tab>)\n        }\n      </TabList>\n      {\n        props.locations.map((location, index) => <TabPanel key={index}>\n          <Page\n            viewedPath={location.viewedPath}\n            viewedLine={location.line}\n            targetId={location.targetId}\n            onOpenFileInTab={props.onOpenFileInTab}\n          />\n        </TabPanel>)\n      }\n    </Tabs>\n  );\n};\n","import styles from './ReferencePanel.module.css';\n\nconst example = `Theorem: \"Fundamental Theorem of Calculus\"\ngiven: f(x), F(x), I, a, b\nwhen:\n. 'a, b is \\\\real'\n. 'a < b'\n. 'I := \\\\open.interval{a, b}'\n. 'f(x) is \\\\continuous.function:on{I}'\n. 'F(x) is \\\\indefinite.integral:of{f(x)}:on{I}'\nthen:\n. '\\\\definite.integral[x]_{a}^{b}:of{f(x)} = F(b) - F(a)'\nusing:\n. 'x - y := x \\\\real.-/ y'\n. 'x < y := x \\\\real.lt/ y'`;\n\nexport interface ReferencePanelProps {\n  onLoad: () => void;\n}\n\nexport const ReferencePanel = (props: ReferencePanelProps) => {\n  props.onLoad();\n  return (\n    <div className={styles.referenceBody}>\n      <div className={styles.referenceContent}>\n        <div className={styles.referenceHeader1}>The MathLingua Reference</div>\n        <p>\n          The MathLingua language consists of two parts, a structural language\n          and an expression language as shown in the example below. For more\n          information, see the language references below or visit&nbsp;\n          <a href=\"https://www.mathlingua.org\">mathlingua.org</a>.\n        </p>\n        <pre>{example}</pre>\n        <div className={styles.referenceHeader1}>Expression Language</div>\n        <p>\n          The expression language is written within single quotes and is used to\n          express mathematical statements.\n        </p>\n        <a href=\"#/help/expressionLanguage\">Expression Language Reference</a>\n        <div className={styles.referenceHeader1}>Structural Language</div>\n        <p>\n          The structural language, outside single quote statements, describes\n          the overall structure of a mathematical construct.\n        </p>\n        <a href=\"#/help/structuralLanguage\">Structural Language Reference</a>\n      </div>\n    </div>\n  );\n};\n","export type Amount = 'One' | 'ZeroOrOne' | 'ZeroOrMore' | 'OneOrMore';\n\nexport interface DocItem {\n  name: string;\n  oneLineDesc?: string;\n  fullDesc?: string;\n  example?: string;\n}\n\nexport interface TerminalDocItem extends DocItem {\n  form: string;\n}\n\nexport interface UnionDocItem extends DocItem {\n  allowed: string[]; // names of the allowed items\n}\n\nexport function ref(name: string) {\n  return `<${name}>`;\n}\n\nexport function unref(ref: string) {\n  return ref.substring(1, ref.length - 1);\n}\n\nexport function literal(text: string) {\n  return ` \\`${text}\\` `;\n}\n\nexport function zeroOrOneTime() {\n  return '? ';\n}\n\nexport function zeroOrMoreTimes() {\n  return '* ';\n}\n\nexport function oneOrMoreTimes() {\n  return '+ ';\n}\n\nexport function group(form: string) {\n  return ` (${form} )`;\n}\n","import {\n  TerminalDocItem,\n  UnionDocItem,\n  ref,\n  literal,\n  oneOrMoreTimes,\n  zeroOrOneTime,\n  zeroOrMoreTimes,\n  group,\n  DocItem,\n} from '../Reference';\n\nconst expressionDocName = 'expression';\nconst commandLhsDocName = 'commandLhs';\nconst operatorCommandLhsDocName = 'operatorCommandLhs';\n\nconst numberDoc: TerminalDocItem = {\n  name: 'number',\n  form:\n    group('-|+') +\n    zeroOrOneTime() +\n    '[0-9]+' +\n    group(literal('.') + '[0-9]+') +\n    zeroOrMoreTimes(),\n  example: `\n10\n-10\n0.123\n-0.12\n+0.12\n+12\n0\n`,\n};\n\nconst identifierDoc: TerminalDocItem = {\n  name: 'identifier',\n  form: '[a-zA-Z0-9]+',\n  example: `\nx\nepsilon\nf\nsomeVar\n`,\n};\n\nconst identifierArgsDoc: TerminalDocItem = {\n  name: 'identifierArgs',\n  form:\n    identifierDoc.name +\n    group(literal(',') + ref(identifierDoc.name)) +\n    zeroOrMoreTimes(),\n  example: `\nx, y\na, b, c\nsomeVar\n`,\n};\n\nconst expressionArgsDoc: TerminalDocItem = {\n  name: 'expressionArgs',\n  form:\n    expressionDocName +\n    group(literal(',') + ref(expressionDocName)) +\n    zeroOrMoreTimes(),\n  example: `\n\\\\continuous.function:on{A \\\\set.times/ B}:to{\\\\reals}\nx + y\nf(x) + g(x)\n\\\\frac{\\pi}{2}\n`,\n};\n\nconst functionMappingLhsDoc: TerminalDocItem = {\n  name: 'functionMappingLhs',\n  form:\n    ref(identifierDoc.name) +\n    literal('(') +\n    ref(identifierArgsDoc.name) +\n    literal(')'),\n  example: `\nf(x, y)\nf(x)\nGamma(a, b, c)\nSomeName(x, y)\n`,\n};\n\nconst functionMappingDoc: TerminalDocItem = {\n  name: 'functionMapping',\n  form:\n    ref(identifierDoc.name) +\n    literal('(') +\n    ref(expressionArgsDoc.name) +\n    literal(')'),\n  example: `\nf(x, y)\nf(x + y, 10)\nf(\\\\derivative[x]{x^2 + 1}, y)\n`,\n};\n\nconst sequenceMappingLhsDoc: TerminalDocItem = {\n  name: 'sequenceMappingLhs',\n  form:\n    ref(identifierDoc.name) +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}'),\n  example: `\nx_{a, b, c},\nf_{i}\n`,\n};\n\nconst sequenceMappingDoc: TerminalDocItem = {\n  name: 'sequenceMapping',\n  form:\n    ref(identifierDoc.name) +\n    literal('_') +\n    literal('{') +\n    ref(expressionArgsDoc.name) +\n    literal('}'),\n  example: `\nx_{10, i + j}\nx_{i}\nx_{0}\n`,\n};\n\nconst functionLikeSequenceLhsDoc: TerminalDocItem = {\n  name: 'functionLikeSequenceLhs',\n  form:\n    literal('{') +\n    ref(identifierDoc.name) +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}') +\n    literal('(') +\n    ref(identifierArgsDoc.name) +\n    literal(')') +\n    literal('}') +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}'),\n  example: `\n{someName_{var1, var2}(arg1, arg2)}_{var1, var2}\n{f_{i}(x)}_{i}\n{f_{i,j}(x, y)}_{i,j}\n`,\n};\n\nconst nonFunctionLikeSequenceLhsDoc: TerminalDocItem = {\n  name: 'nonFunctionLikeSequenceLhs',\n  form:\n    literal('{') +\n    ref(identifierDoc.name) +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}') +\n    literal('}') +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}'),\n  example: `\n{x_{i}}_{i}\n{x_{i, j}}_{i, j}\n`,\n};\n\nconst sequenceLhsDoc: UnionDocItem = {\n  name: 'sequenceLhs',\n  allowed: [\n    ref(functionLikeSequenceLhsDoc.name),\n    ref(nonFunctionLikeSequenceLhsDoc.name),\n  ],\n};\n\nconst curlyGroupDoc: TerminalDocItem = {\n  name: 'curlyGroup',\n  form: literal('{') + ref(expressionDocName) + literal('}'),\n  example: `\n{x + y + \\\\frac{a}{b}}\n{10}\n`,\n};\n\nconst parenGroupDoc: TerminalDocItem = {\n  name: 'parenGroup',\n  form: literal('(') + ref(expressionDocName) + literal(')'),\n  example: `\n(x + y + \\\\frac{a}{b})\n(10)\n`,\n};\n\nconst operatorDoc: TerminalDocItem = {\n  name: 'operator',\n  form: '[~!@#$%^&*-+=|<>?/]+',\n  example: `\n+\n++\n+*\n/\n<=\n`,\n};\n\nconst tupleLhsDoc: TerminalDocItem = {\n  name: 'tupleLhs',\n  form: literal('(') + ref(identifierArgsDoc.name) + literal(')'),\n  example: `\n(X, Y, Z)\n(x)\n(a, b)\n(name1, name2, name3)\n`,\n};\n\nconst tupleDoc: TerminalDocItem = {\n  name: 'tuple',\n  form: literal('(') + ref(expressionArgsDoc.name) + literal(')'),\n  example: `\n(10, x + y)\n(\\\\f{a}, x + y)\n`,\n};\n\nconst lhsDocName = 'leftHandSide';\nconst lhsDoc: UnionDocItem = {\n  name: lhsDocName,\n  allowed: [\n    ref(identifierDoc.name),\n    ref(tupleLhsDoc.name),\n    ref(functionMappingLhsDoc.name),\n    ref(sequenceMappingLhsDoc.name),\n    ref(commandLhsDocName),\n    ref(operatorCommandLhsDocName),\n    ref(sequenceLhsDoc.name),\n  ],\n};\n\nconst commandArgLhsDoc: UnionDocItem = {\n  name: 'commandArgLhs',\n  allowed: [\n    ref(identifierDoc.name),\n    ref(functionMappingLhsDoc.name),\n    ref(sequenceMappingLhsDoc.name),\n  ],\n};\n\nconst commandArgsLhsDoc: TerminalDocItem = {\n  name: 'commandArgs',\n  form:\n    ref(commandArgLhsDoc.name) +\n    group(literal(',') + ref(commandArgLhsDoc.name)) +\n    zeroOrMoreTimes(),\n};\n\nconst commandPartParenGroupLhsDoc: TerminalDocItem = {\n  name: 'commandPartParenGroupLhs',\n  form: literal('(') + ref(commandArgsLhsDoc.name) + literal(')'),\n};\n\nconst commandPartParenGroupDoc: TerminalDocItem = {\n  name: 'commandPartParenGroup',\n  form: literal('(') + ref(expressionArgsDoc.name) + literal(')'),\n};\n\nconst commandPartCurlyGroupLhsDoc: TerminalDocItem = {\n  name: 'commandPartCurlyGroupLhs',\n  form: literal('{') + ref(commandArgsLhsDoc.name) + literal('}'),\n};\n\nconst commandPartCurlyGroupDoc: TerminalDocItem = {\n  name: 'commandPartCurlyGroup',\n  form: literal('{') + ref(expressionArgsDoc.name) + literal('}'),\n};\n\nconst commandPartNameDoc: TerminalDocItem = {\n  name: 'commandPartName',\n  form: '[a-zA-Z0-9~!@#$%^&*-+=|<>?/]' + oneOrMoreTimes(),\n};\n\nconst commandPartNamedGroupLhsDoc: TerminalDocItem = {\n  name: 'commandPartNamedGroupLhs',\n  form:\n    literal(':') +\n    ref(commandPartNameDoc.name) +\n    literal('{') +\n    ref(commandArgsLhsDoc.name) +\n    literal('}'),\n};\n\nconst commandPartNamedGroupDoc: TerminalDocItem = {\n  name: 'commandPartNamedGroup',\n  form:\n    literal(':') +\n    ref(commandPartNameDoc.name) +\n    literal('{') +\n    ref(expressionArgsDoc.name) +\n    literal('}'),\n};\n\nconst commandPartSquareGroup: TerminalDocItem = {\n  name: 'commandPartSquareGroup',\n  form:\n    literal('[') +\n    ref(commandArgsLhsDoc.name) +\n    literal(']') +\n    group(\n      literal('_') + literal('{') + ref(commandArgsLhsDoc.name) + literal('}')\n    ) +\n    zeroOrOneTime() +\n    group(\n      literal('^') + literal('{') + ref(commandArgsLhsDoc.name) + literal('}')\n    ) +\n    zeroOrOneTime(),\n};\n\nconst commandPartLhsDoc: TerminalDocItem = {\n  name: 'commandPartLhs',\n  form:\n    ref(commandPartNameDoc.name) +\n    ref(commandPartSquareGroup.name) +\n    zeroOrOneTime() +\n    ref(commandPartCurlyGroupLhsDoc.name) +\n    zeroOrMoreTimes() +\n    ref(commandPartNamedGroupLhsDoc.name) +\n    zeroOrMoreTimes(),\n};\n\nconst commandPartDoc: TerminalDocItem = {\n  name: 'commandPart',\n  form:\n    ref(commandPartNameDoc.name) +\n    ref(commandPartSquareGroup.name) +\n    zeroOrOneTime() +\n    ref(commandPartCurlyGroupDoc.name) +\n    zeroOrMoreTimes() +\n    ref(commandPartNamedGroupDoc.name) +\n    zeroOrMoreTimes(),\n};\n\nconst commandLhsDoc: TerminalDocItem = {\n  name: commandLhsDocName,\n  form:\n    literal('\\\\') +\n    ref(commandPartLhsDoc.name) +\n    oneOrMoreTimes() +\n    ref(commandPartParenGroupLhsDoc.name) +\n    zeroOrOneTime(),\n  example: `\n\\\\real.continuous.function:on{A}:to{B}\n\\\\topological{G}.continuous.function:on{A}:to{B}\n\\\\derivative[x]{f(x)}\n\\\\limit[y]_{a}{f(y)}\n\\\\finite.sum[k]_{a}^{b}{term(k)}\n\\\\pi\n\\\\someName\n\\\\finite.group\n`,\n};\n\nconst commandDoc: TerminalDocItem = {\n  name: 'command',\n  form:\n    literal('\\\\') +\n    ref(commandPartDoc.name) +\n    oneOrMoreTimes() +\n    ref(commandPartParenGroupDoc.name) +\n    zeroOrOneTime(),\n  example: `\n\\\\real.continuous.function:on{A \\\\set.times/ B}:to{\\\\reals}\n\\\\topological{G := (X, O)}.continuous.function:on{A}:to{B}\n\\\\derivative[x]{f(x) + g(x)}\n\\\\limit[y]_{0}{y^2 + 2*y + 1}\n\\\\finite.sum[k]_{0}^{10}{k^2 + 2}\n\\\\pi\n\\\\someName\n`,\n};\n\nconst operatorCommandLhsDoc: TerminalDocItem = {\n  name: operatorCommandLhsDocName,\n  form:\n    ref(identifierDoc.name) +\n    literal('\\\\') +\n    ref(commandPartLhsDoc.name) +\n    oneOrMoreTimes() +\n    literal('/') +\n    ref(identifierDoc.name),\n  example: `\nA \\\\set.times/ B\nx \\\\leq{X}/ y\na \\\\otimes/ b\n`,\n};\n\nconst operatorCommandDoc: TerminalDocItem = {\n  name: 'operatorCommand',\n  form:\n    ref(expressionDocName) +\n    literal('\\\\') +\n    ref(commandPartDoc.name) +\n    oneOrMoreTimes() +\n    literal('/') +\n    ref(expressionDocName),\n  example: `\nA \\\\set.times/ B\nx \\\\leq{X}/ 10\n(A + B) \\\\otimes/ C\n`,\n};\n\nconst colonEqualsRhsDoc: UnionDocItem = {\n  name: 'colonEqualsRhs',\n  allowed: [ref(sequenceLhsDoc.name), ref(expressionDocName)],\n};\n\nconst colonEqualsDoc: TerminalDocItem = {\n  name: 'colonEquals',\n  form: ref(lhsDoc.name) + literal(':=') + ref(colonEqualsRhsDoc.name),\n  example: `\nf(x) := x^2 + 1\nX := (A \\\\otimes/ B, C, 0)\nP := {p_{i}}_{i}`,\n};\n\nconst isOrInLhsDoc: UnionDocItem = {\n  name: 'isOrInLhs',\n  allowed: [ref(lhsDoc.name), ref(colonEqualsDoc.name)],\n};\n\nconst isDoc: TerminalDocItem = {\n  name: 'is',\n  form: ref(isOrInLhsDoc.name) + literal('is') + ref(commandDoc.name),\n  example: `\nx is \\\\real\nf(x) is \\\\continuous.function\nX := (a, b, c) is \\\\some.tuple\n`,\n};\n\nconst inDoc: TerminalDocItem = {\n  name: 'in',\n  form: ref(isOrInLhsDoc.name) + literal('in') + ref(expressionDocName),\n  example: `\nx in X\nx in A \\\\set.times/ B\n`,\n};\n\nconst textDoc: TerminalDocItem = {\n  name: 'text',\n  form: literal('\"') + '[^\"]*' + literal('\"'),\n  example: `\n\"some text\"\n\"let $x \\\\in X$.  Then there exists...\"\n`,\n};\n\nconst expressionDoc: UnionDocItem = {\n  name: expressionDocName,\n  allowed: [\n    ref(functionMappingDoc.name),\n    ref(sequenceMappingDoc.name),\n    ref(identifierDoc.name),\n    ref(curlyGroupDoc.name),\n    ref(tupleDoc.name),\n    ref(parenGroupDoc.name),\n    ref(isDoc.name),\n    ref(inDoc.name),\n    ref(operatorDoc.name),\n    ref(colonEqualsDoc.name),\n    ref(commandDoc.name),\n    ref(operatorCommandDoc.name),\n    ref(textDoc.name),\n    ref(numberDoc.name),\n  ],\n  example: `\nf(x) + g(x)\n\\\\limit[i]_{\\\\infinity}{{a_{i}}_{i}}\n2*x^2 + x + 1\nx \\\\real.+/ y\n{x + y} \\\\set.times// (A + B)\nX := (a, b, c)\nf(x) := \\\\sin(x)/x\n`,\n};\n\nconst docs = [\n  identifierDoc,\n  identifierArgsDoc,\n  expressionArgsDoc,\n  functionMappingLhsDoc,\n  functionMappingDoc,\n  sequenceMappingLhsDoc,\n  sequenceMappingDoc,\n  functionLikeSequenceLhsDoc,\n  nonFunctionLikeSequenceLhsDoc,\n  sequenceLhsDoc,\n  curlyGroupDoc,\n  parenGroupDoc,\n  operatorDoc,\n  tupleLhsDoc,\n  tupleDoc,\n  lhsDoc,\n  commandArgLhsDoc,\n  commandArgsLhsDoc,\n  commandPartParenGroupLhsDoc,\n  commandPartParenGroupDoc,\n  commandPartCurlyGroupLhsDoc,\n  commandPartCurlyGroupDoc,\n  commandPartNameDoc,\n  commandPartNamedGroupLhsDoc,\n  commandPartNamedGroupDoc,\n  commandPartSquareGroup,\n  commandPartLhsDoc,\n  commandPartDoc,\n  commandLhsDoc,\n  commandDoc,\n  operatorCommandLhsDoc,\n  operatorCommandDoc,\n  colonEqualsRhsDoc,\n  colonEqualsDoc,\n  isOrInLhsDoc,\n  isDoc,\n  inDoc,\n  textDoc,\n  expressionDoc,\n  numberDoc,\n];\n\nfunction buildNameToDocItems(): Map<string, DocItem> {\n  const result: Map<string, DocItem> = new Map();\n  for (const item of docs) {\n    const refName = ref(item.name);\n    if (result.has(refName)) {\n      throw new Error(`Duplicate doc item found with name ${refName}`);\n    }\n    result.set(refName, item);\n  }\n  return result;\n}\n\nexport function getDocItems(): DocItem[] {\n  const nameToDocItem = buildNameToDocItems();\n  const result: DocItem[] = [];\n  getDocItemsImpl(ref(expressionDocName), result, nameToDocItem, new Set());\n  return result;\n}\n\nfunction getDocItemsImpl(\n  curRefName: string,\n  result: DocItem[],\n  nameToDocItem: Map<string, DocItem>,\n  visited: Set<string>\n) {\n  if (visited.has(curRefName)) {\n    return;\n  }\n\n  visited.add(curRefName);\n  const curDocItem = nameToDocItem.get(curRefName)!;\n  result.push(curDocItem);\n\n  for (const name of getNeighborRefNames(curDocItem)) {\n    getDocItemsImpl(name, result, nameToDocItem, visited);\n  }\n}\n\nfunction getNeighborRefNames(docItem: any): string[] {\n  if (docItem.form) {\n    const result: string[] = [];\n    for (const item of docs) {\n      const refName = ref(item.name);\n      if (docItem.form.indexOf(refName) >= 0) {\n        result.push(refName);\n      }\n    }\n    return result;\n  } else if (docItem.allowed) {\n    return docItem.allowed;\n  } else {\n    return [];\n  }\n}\n","import './TexTalkReferencePanel.css';\n\nimport { ref } from '../Reference';\nimport { getDocItems } from './TexTalkReference';\n\nexport interface TexTalkReferencePanelProps {\n  onLoad: () => void;\n}\n\nexport const TexTalkReferencePanel = (props: TexTalkReferencePanelProps) => {\n  props.onLoad();\n\n  let content = `<div class='texTalkReferenceTitle'>Expression Language Reference</div>`;\n  content += '<p><b>Note:</b> This document is still a work in progress and is not complete.</p>';\n\n  for (const item of getDocItems()) {\n    content += `<div class='texTalkReferenceName'>&lt;${item.name}&gt;</div>\\n`;\n\n    content += `<div class='texTalkReferenceHeader'>Specification</div>\\n`;\n    content += `<pre class='texTalkReferenceMono'>\\n`;\n    let preContent = '';\n    const anyItem = item as any;\n    if (anyItem.form) {\n      preContent += `${ref(item.name)} ::= ${anyItem.form}\\n`;\n    } else if (anyItem.allowed) {\n      const prefix = `${ref(item.name)} :`;\n      let indent = '';\n      for (let i = 0; i < prefix.length - 1; i++) {\n        indent += ' ';\n      }\n      if (anyItem.allowed.length > 0) {\n        preContent += prefix + ':= ' + anyItem.allowed[0] + '\\n';\n        for (let i = 1; i < anyItem.allowed.length; i++) {\n          preContent += indent + '|   ' + anyItem.allowed[i] + '\\n';\n        }\n      }\n    }\n    content +=\n      preContent.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</pre>\\n';\n\n    if (item.example) {\n      content += `<div class='texTalkReferenceHeader'>Examples</div>\\n`;\n      content += `<pre class='texTalkReferenceMono'>${item.example\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')}</pre>`;\n    }\n  }\n\n  return (\n    <div\n      dangerouslySetInnerHTML={{\n        __html: `<div class='texTalkReferenceBody'><div class='texTalkReferenceContent'>${content}</div></div>`,\n      }}\n    ></div>\n  );\n};\n","import {\n  DocItem,\n  group,\n  literal,\n  ref,\n  TerminalDocItem,\n  UnionDocItem,\n  zeroOrMoreTimes,\n} from '../Reference';\n\nconst identifierDoc: TerminalDocItem = {\n  name: 'identifier',\n  form: '[a-zA-Z0-9~!@#$%^&*-+=|<>?/]+',\n  example: `\nX\n+\n0\n++\n10\n`,\n};\n\nconst identifierArgsDoc: TerminalDocItem = {\n  name: 'identifierArgs',\n  form:\n    ref(identifierDoc.name) +\n    group(literal(',') + ref(identifierDoc.name)) +\n    zeroOrMoreTimes(),\n  example: `\na, b\nX, +, 0\n`,\n};\n\nconst tupleDoc: TerminalDocItem = {\n  name: 'tuple',\n  form: literal('(') + ref(identifierArgsDoc.name) + literal(')'),\n  example: `\n(a, b)\n(X, +, 0)\n`,\n};\n\nconst functionMappingDoc: TerminalDocItem = {\n  name: 'functionMapping',\n  form:\n    ref(identifierDoc.name) +\n    literal('(') +\n    ref(identifierArgsDoc.name) +\n    literal(')'),\n  example: `\nf(x)\ng(x, y, z)\n`,\n};\n\nconst functionLikeSequenceMappingDoc: TerminalDocItem = {\n  name: 'functionLikeSequenceMapping',\n  form:\n    literal('{') +\n    ref(identifierDoc.name) +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}') +\n    literal('(') +\n    ref(identifierArgsDoc.name) +\n    literal(')') +\n    literal('}') +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}'),\n  example: `\n{f_{i}(x)}_{i}\n{f_{i,j}(x, y)}_{i, j}\n`,\n};\n\nconst nonFunctionLikeSequenceMappingDoc: TerminalDocItem = {\n  name: 'nonFunctionLikeSequenceMapping',\n  form:\n    literal('{') +\n    ref(identifierDoc.name) +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}') +\n    literal('}') +\n    literal('_') +\n    literal('{') +\n    ref(identifierArgsDoc.name) +\n    literal('}'),\n  example: `\n{a_{i}}_{i}\n{x_{i, j}}_{i, j}\n`,\n};\n\nconst sequenceMappingDoc: UnionDocItem = {\n  name: 'sequenceMapping',\n  allowed: [\n    ref(functionLikeSequenceMappingDoc.name),\n    ref(nonFunctionLikeSequenceMappingDoc.name),\n  ],\n};\n\nconst collectionDoc: TerminalDocItem = {\n  name: 'collection',\n  form: literal('{') + ref(identifierArgsDoc.name) + literal('}'),\n  example: `\n{a}\n{x, y}\n`,\n};\n\nconst colonEqualsLhsDoc: UnionDocItem = {\n  name: 'colonEqualsLhs',\n  allowed: [\n    ref(identifierDoc.name),\n    ref(functionLikeSequenceMappingDoc.name) +\n      ref(tupleDoc.name) +\n      ref(collectionDoc.name),\n  ],\n};\n\nconst colonEqualsRhsDoc: UnionDocItem = {\n  name: 'colonEqualsRhs',\n  allowed: [ref(identifierDoc.name), ref(sequenceMappingDoc.name)],\n};\n\nconst colonEqualsDoc: TerminalDocItem = {\n  name: 'colonEquals',\n  form:\n    ref(colonEqualsLhsDoc.name) + literal(':=') + ref(colonEqualsRhsDoc.name),\n  example: `\nG := (X, +, 0)\nX := {x}\nX := {x_i}_i\n`,\n};\n\nconst targetDoc: UnionDocItem = {\n  name: 'target',\n  allowed: [\n    ref(identifierDoc.name),\n    ref(collectionDoc.name),\n    ref(sequenceMappingDoc.name),\n    ref(tupleDoc.name),\n    ref(colonEqualsDoc.name),\n  ],\n};\n\nexport const docs = [\n  identifierDoc,\n  identifierArgsDoc,\n  tupleDoc,\n  functionMappingDoc,\n  functionLikeSequenceMappingDoc,\n  nonFunctionLikeSequenceMappingDoc,\n  sequenceMappingDoc,\n  collectionDoc,\n  colonEqualsLhsDoc,\n  colonEqualsRhsDoc,\n  colonEqualsDoc,\n  targetDoc,\n];\n\nfunction buildNameToDocItems(): Map<string, DocItem> {\n  const result: Map<string, DocItem> = new Map();\n  for (const item of docs) {\n    const refName = ref(item.name);\n    if (result.has(refName)) {\n      throw new Error(`Duplicate doc item found with name ${refName}`);\n    }\n    result.set(refName, item);\n  }\n  return result;\n}\n\nexport function getDocItems(): DocItem[] {\n  const nameToDocItem = buildNameToDocItems();\n  const result: DocItem[] = [];\n  getDocItemsImpl(ref(targetDoc.name), result, nameToDocItem, new Set());\n  return result;\n}\n\nfunction getDocItemsImpl(\n  curRefName: string,\n  result: DocItem[],\n  nameToDocItem: Map<string, DocItem>,\n  visited: Set<string>\n) {\n  if (visited.has(curRefName)) {\n    return;\n  }\n\n  visited.add(curRefName);\n  const curDocItem = nameToDocItem.get(curRefName)!;\n  if (curDocItem) {\n    result.push(curDocItem);\n  }\n\n  for (const name of getNeighborRefNames(curDocItem)) {\n    getDocItemsImpl(name, result, nameToDocItem, visited);\n  }\n}\n\nfunction getNeighborRefNames(docItem: any): string[] {\n  if (!docItem) {\n    return [];\n  }\n\n  if (docItem.form) {\n    const result: string[] = [];\n    for (const item of docs) {\n      const refName = ref(item.name);\n      if (docItem.form.indexOf(refName) >= 0) {\n        result.push(refName);\n      }\n    }\n    return result;\n  } else if (docItem.allowed) {\n    return docItem.allowed;\n  } else {\n    return [];\n  }\n}\n","import './ChalkTalkReferencePanel.css';\n\nimport { ref } from '../Reference';\nimport { getDocItems } from './ChalkTalkReference';\n\nexport interface ChalkTalkReferencePanelProps {\n  onLoad: () => void;\n}\n\nexport const ChalkTalkReferencePanel = (props: ChalkTalkReferencePanelProps) => {\n  props.onLoad();\n\n  let content = `<div class='chalkTalkReferenceTitle'>Structural Language Reference</div>`;\n  content += '<p><b>Note:</b> This document is still a work in progress and is not complete.</p>';\n\n  for (const item of getDocItems()) {\n    content += `<div class='chalkTalkReferenceName'>&lt;${item.name}&gt;</div>\\n`;\n\n    content += `<div class='chalkTalkReferenceHeader'>Specification</div>\\n`;\n    content += `<pre class='chalkTalkReferenceMono'>\\n`;\n    let preContent = '';\n    const anyItem = item as any;\n    if (anyItem.form) {\n      preContent += `${ref(item.name)} ::= ${anyItem.form}\\n`;\n    } else if (anyItem.allowed) {\n      const prefix = `${ref(item.name)} :`;\n      let indent = '';\n      for (let i = 0; i < prefix.length - 1; i++) {\n        indent += ' ';\n      }\n      if (anyItem.allowed.length > 0) {\n        preContent += prefix + ':= ' + anyItem.allowed[0] + '\\n';\n        for (let i = 1; i < anyItem.allowed.length; i++) {\n          preContent += indent + '|   ' + anyItem.allowed[i] + '\\n';\n        }\n      }\n    }\n    content +=\n      preContent.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</pre>\\n';\n\n    if (item.example) {\n      content += `<div class='chalkTalkReferenceHeader'>Examples</div>\\n`;\n      content += `<pre class='chalkTalkReferenceMono'>${item.example\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')}</pre>`;\n    }\n  }\n\n  return (\n    <div\n      dangerouslySetInnerHTML={{\n        __html: `<div class='chalkTalkReferenceBody'><div class='chalkTalkReferenceContent'>${content}</div></div>`,\n      }}\n    ></div>\n  );\n};\n","import styles from './App.module.css';\n\nimport React, { useEffect, useState } from 'react';\n\nimport { HashRouter, Switch, Route } from 'react-router-dom';\nimport { ContentPanel } from './components/content-panel/ContentPanel';\nimport { ReferencePanel } from './components/reference/ReferencePanel';\nimport { TexTalkReferencePanel } from './components/reference/tex-talk-reference-panel/TexTalkReferencePanel';\nimport { ChalkTalkReferencePanel } from './components/reference/chalk-talk-reference-panel/ChalkTalkReferencePanel';\n\nimport CookieConsent from 'react-cookie-consent';\nimport * as api from './services/api';\n\nimport ReactGA from 'react-ga4';\nlet analyticsInitialized = false;\n\nexport const App = () => {\n  const [allowAnalytics, setAllowAnalytics] = useState(false);\n  const [googleAnalyticsId, setGoogleAnalyticsId] = useState(null as null | string);\n\n  useEffect(() => {\n    api.getConfiguration().then(config => {\n      const id = config.googleAnalyticsId;\n      if (id) {\n        setGoogleAnalyticsId(id);\n      }\n    });\n  }, []);\n\n  const pageViewed = (path: string) => {\n    if (allowAnalytics && googleAnalyticsId) {\n      if (!analyticsInitialized) {\n        ReactGA.initialize(googleAnalyticsId);\n        analyticsInitialized = true;\n      }\n      ReactGA.event('page_view', {\n        page_title: path\n      });\n    }\n  };\n\n  return (\n    <HashRouter hashType=\"slash\">\n      <ErrorBoundary>\n        <div className={styles.contentPanel}>\n          <Switch>\n            <Route exact path=\"/help\">\n              <ReferencePanel\n                onLoad={() => pageViewed('/help')}/>\n            </Route>\n            <Route exact path=\"/help/expressionLanguage\">\n              <TexTalkReferencePanel\n                onLoad={() => pageViewed('/help/expressionLanguage')}/>\n            </Route>\n            <Route exact path=\"/help/structuralLanguage\">\n              <ChalkTalkReferencePanel\n                onLoad={() => pageViewed('/help/structuralLanguage')}/>\n            </Route>\n            <Route\n              path=\"/:relativePath(.*)\"\n              render={(routerProps) => (\n                <ContentPanel\n                  redirect={(path) =>\n                    routerProps.history.push({\n                      pathname: path,\n                    })\n                  }\n                  onLocationChanged={(path) => pageViewed(path)}\n                />\n              )}\n            />\n          </Switch>\n        </div>\n        {\n          googleAnalyticsId ?\n          <CookieConsent\n            buttonText='I agree'\n            buttonStyle={{\n              backgroundColor: '#70c273',\n              color: '#ffffff',\n              borderRadius: '3px'\n            }}\n            declineButtonText='I disagree'\n            declineButtonStyle={{\n              backgroundColor: '#d15858',\n              color: '#ffffff',\n              borderRadius: '3px'\n            }}\n            enableDeclineButton={true}\n            acceptOnScroll={false}\n            style={{\n              fontFamily: 'Georgia, \"Times New Roman\", Times, serif',\n              color: '#000000',\n              borderTop: 'solid',\n              borderTopColor: '#cccccc',\n              borderTopWidth: '1px',\n              background: '#f5f5f8'\n            }}\n            onAccept={() => setAllowAnalytics(true)}\n            onDecline={() => setAllowAnalytics(false)}\n            debug={false}>\n            If you agree, this site will use cookies to analyze its traffic.\n          </CookieConsent> : null\n        }\n      </ErrorBoundary>\n    </HashRouter>\n  );\n};\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n}\n\nclass ErrorBoundary extends React.Component<{}, ErrorBoundaryState> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      hasError: false,\n    };\n  }\n\n  componentDidCatch(error: any, info: any) {\n    this.setState({\n      hasError: true,\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <p>\n          An error occurred connecting to the MathLingua server. Are you running{' '}\n          <code>mlg serve</code>?\n        </p>\n      );\n    } else {\n      return this.props.children;\n    }\n  }\n}\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\n\nimport thunkMiddleware from 'redux-thunk';\n\nimport pathsReducer from './pathsSlice';\nimport sidePanelVisibleReducer from './sidePanelVisibleSlice';\nimport queryReducer from './querySlice';\nimport isEditModeReducer from './isEditModeSlice';\nimport errorResultsReducer from './errorResultsSlice';\nimport selectedTabPathReducer from './selectedTabPathSlice';\nimport isFullscreenReducer from './isFullscreenSlice';\nimport editorFontReducer from './editorFontSlice';\nimport editorFontSizeReducer from './editorFontSizeSlice';\n\nexport const store = configureStore({\n  reducer: {\n    sidePanelVisible: sidePanelVisibleReducer,\n    paths: pathsReducer,\n    query: queryReducer,\n    isEditMode: isEditModeReducer,\n    isFullscreen: isFullscreenReducer,\n    errorResults: errorResultsReducer,\n    selectedTabPath: selectedTabPathReducer,\n    editorFont: editorFontReducer,\n    editorFontSize: editorFontSizeReducer\n  },\n  middleware: [thunkMiddleware],\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport { store } from './store/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './support/serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"indexPage\":\"SignatureIndex_indexPage__1Mg5P\",\"indexList\":\"SignatureIndex_indexList__27b3A\",\"indexListItem\":\"SignatureIndex_indexListItem__1JcHj\",\"indexItemLink\":\"SignatureIndex_indexItemLink__1bjtz\",\"indexItemLocation\":\"SignatureIndex_indexItemLocation__3bzXq\",\"indexItemCalledList\":\"SignatureIndex_indexItemCalledList__DF8mb\",\"indexListCalledLink\":\"SignatureIndex_indexListCalledLink__1SXD5\",\"indexItemCalledLocation\":\"SignatureIndex_indexItemCalledLocation__YqiSo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mathlinguaPage\":\"Page_mathlinguaPage__316SN\",\"errorView\":\"Page_errorView__1w9pu\",\"errorItem\":\"Page_errorItem__2mYLP\",\"linkPanel\":\"Page_linkPanel__1lmJv\",\"previousLink\":\"Page_previousLink__pU3BI\",\"nextLink\":\"Page_nextLink__3hVie\",\"editorMenuItem\":\"Page_editorMenuItem__2fHkR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchArea\":\"SearchPanel_searchArea__3eH01\",\"search\":\"SearchPanel_search__2HQuA\",\"searchDropdown\":\"SearchPanel_searchDropdown__24NWE\",\"searchDropdownItem\":\"SearchPanel_searchDropdownItem__3wg4x\",\"searchDropdownItemSelected\":\"SearchPanel_searchDropdownItemSelected__20Nxq\",\"searchButton\":\"SearchPanel_searchButton__2WliP\",\"clearButton\":\"SearchPanel_clearButton___bhw7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mathlinguaTopLevel\":\"TopLevelEntry_mathlinguaTopLevel__tOe0D\",\"mathlinguaIconPane\":\"TopLevelEntry_mathlinguaIconPane__2KBDK\",\"mathlinguaFlipIcon\":\"TopLevelEntry_mathlinguaFlipIcon__-3nJ2\",\"mathlinguaOpenIcon\":\"TopLevelEntry_mathlinguaOpenIcon__8Id1v\",\"mathlinguaCloseButton\":\"TopLevelEntry_mathlinguaCloseButton__o8PUx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"referenceBody\":\"ReferencePanel_referenceBody__JkIk1\",\"referenceContent\":\"ReferencePanel_referenceContent__3j9Qf\",\"referenceTitle\":\"ReferencePanel_referenceTitle__2AIh_\",\"referenceHeader1\":\"ReferencePanel_referenceHeader1__GkHD1\",\"referenceHeader2\":\"ReferencePanel_referenceHeader2__LPX8y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"entitiesPanel\":\"EntitiesPanel_entitiesPanel__1Sx74\",\"entitiesPanelItem\":\"EntitiesPanel_entitiesPanelItem__1Xi0s\",\"closeAllButton\":\"EntitiesPanel_closeAllButton__1uj94\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topLevelEntityGroup\":\"TopLevelEntityGroup_topLevelEntityGroup__MMFuW\",\"triangle\":\"TopLevelEntityGroup_triangle__7AIJb\",\"triangleBorder\":\"TopLevelEntityGroup_triangleBorder__2sXGm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentPanel\":\"ContentPanel_contentPanel__1GlTz\",\"button\":\"ContentPanel_button__1ScBJ\",\"selectedTab\":\"ContentPanel_selectedTab__shyiU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorLabel\":\"ErrorView_errorLabel__2AXEh\",\"errorMessage\":\"ErrorView_errorMessage__2gtow\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidePanel\":\"SidePanel_sidePanel__2wshc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"githubIcon\":\"GitHubIcon_githubIcon__20bvO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentPanel\":\"App_contentPanel__1ZGS7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mathlinguaBlockCommentTopLevel\":\"BlockComment_mathlinguaBlockCommentTopLevel__dhGBJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topbar\":\"TopBar_topbar__2sxmu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidePanelButton\":\"SidePanelButton_sidePanelButton__u4HAg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editModeButton\":\"EditModeButton_editModeButton__1Orbv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"helpIcon\":\"HelpButton_helpIcon__227gR\"};"],"sourceRoot":""}